(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75149,59015,17892,31462,24507,e=>{"use strict";var t,i=e.i(91398),n=e.i(38676),l=e.i(99930);function r({buttonContent:e,title:t,content:r,isOpen:a,setIsOpen:s,onOpen:o=()=>{},color:_=l.ColorEnum.BLUE}){function u(e){e&&o(),s(e)}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.default,{onClick:()=>u(!0),content:e,color:_}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":!0,className:"fixed top-0 left-0 w-screen h-screen bg-black/40",onClick:()=>u(!1)}),(0,i.jsxs)("div",{className:"fixed left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col bg-white rounded",children:[(0,i.jsxs)("div",{className:"rounded-t "+function(e){switch(e){case l.ColorEnum.BLUE:return"bg-blue-200 ";case l.ColorEnum.GREEN:return"bg-green-200 ";case l.ColorEnum.RED:return"bg-red-200 ";case l.ColorEnum.CYAN:return"bg-cyan-200 "}}(_),children:[(0,i.jsx)("button",{className:"float-right px-2.5 m-2 pt-1 pb-2 text-xl rounded "+function(e){switch(e){case l.ColorEnum.BLUE:return"hover:bg-blue-300 ";case l.ColorEnum.GREEN:return"hover:bg-green-300 ";case l.ColorEnum.RED:return"hover:bg-red-300 ";case l.ColorEnum.CYAN:return"hover:bg-cyan-300 "}}(_),onClick:()=>u(!1),children:"╳"}),(0,i.jsx)("p",{className:"float-left m-3.5 text-xl",children:t})]}),(0,i.jsx)("div",{className:"p-4",children:r})]})]})]})}e.s(["default",()=>r],75149);var a=e.i(35125),s=e.i(58638),o=e.i(33243),_=e.i(10649);function u(e){let t=e.split("\n"),i=Math.max(...t.map(e=>e.length)),n=t.length,l=new o.default(-1,-1),r=[],u=(0,s.getMatrixOfSize)(i,n,_.LevelTileEnum.EMPTY);for(let e=0;e<t.length;e++)for(let i=0;i<t[e].length;i++)switch(t[e].charAt(i)){case" ":break;case"#":u[i][e]=_.LevelTileEnum.WALL;break;case".":u[i][e]=_.LevelTileEnum.GOAL;break;case"$":r.push(new o.default(i,e));break;case"*":u[i][e]=_.LevelTileEnum.GOAL,r.push(new o.default(i,e));break;case"@":l=new o.default(i,e);break;case"+":l=new o.default(i,e),u[i][e]=_.LevelTileEnum.GOAL;break;default:throw Error("Error parsing XSB code - unknown character")}return new a.default(i,n,u,r,l)}function c(e){return(0,s.getMatrixWithConditionalFill)(e.lenY,e.lenX,(t,i)=>e.transformTileAtCoordinates(new o.default(i,t)," ","#",".","$","@","*","+","E")).map(e=>e.join("").trimEnd()).join("\n")}e.s(["getLevelFromXsbCode",()=>u,"getXsbCodeFromLevel",()=>c],59015);var h=e.i(72758),f=((t={})[t.CSB_CODE=0]="CSB_CODE",t[t.XSB_CODE=1]="XSB_CODE",t);function g(e){switch(e){case 0:return"CSB code";case 1:return"XSB code"}}function d({value:e,codeType:t,readOnly:n=!1,onChange:l=()=>{},includeTitle:r=!0}){let a,s,o;return t==f.CSB_CODE?(a="CSB code:",s=h.DEFAULT_CSB_FOR_GAME,o="h-24 "):(a="XSB code:",s=h.DEFAULT_XSB_CODE,o="h-96 font-mono "),(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)("p",{className:"mt-2",children:a}),(0,i.jsx)("textarea",{readOnly:n,value:e,placeholder:s,onChange:l,className:"my-2 outline resize-none w-[500] read-only:bg-gray-200 "+o}),(0,i.jsx)("br",{})]})}e.s(["CodeTypeEnum",()=>f,"codeEnumToString",()=>g],17892),e.s(["default",()=>d],31462);var v=e.i(91788);let T="\ud83d\udccb";function m({textToCopy:e,text:t=T+" Copy to clipboard"}){let[l,r]=(0,v.useState)(t);return(0,i.jsx)(n.default,{content:l,onClick:function(){navigator.clipboard.writeText(e).then(()=>{}),r(T+" Copied!"),setTimeout(()=>r(t),2e3)}})}e.s(["default",()=>m],24507)},85983,e=>{e.v("/sokoban-react/_next/static/media/logo.536fba4b.svg")},45163,e=>{e.v("/sokoban-react/_next/static/media/empty_tile.bbfc06e6.svg")},31530,e=>{e.v("/sokoban-react/_next/static/media/wall.bd91bc79.svg")},97287,e=>{e.v("/sokoban-react/_next/static/media/goal.ffa462d1.svg")},95579,e=>{e.v("/sokoban-react/_next/static/media/box.77815d28.svg")},35910,e=>{e.v("/sokoban-react/_next/static/media/player.7e213bae.svg")},93965,e=>{e.v("/sokoban-react/_next/static/media/box_on_goal.b71cdb00.svg")},63584,e=>{e.v("/sokoban-react/_next/static/media/player_on_goal.a3786ba2.svg")},80239,e=>{e.v("/sokoban-react/_next/static/media/error.c0755453.svg")},91524,e=>{"use strict";let t="options",i={grid:!1,textGraphics:!1};function n(){let e=void 0===globalThis.window?null:localStorage.getItem(t);if(null==e)return l(i),i;try{let t=JSON.parse(e);return{grid:t.grid??!1,textGraphics:t.textGraphics??!1}}catch{return i}}function l(e){void 0!==globalThis.window&&localStorage.setItem(t,JSON.stringify(e))}e.s(["getOptionsFromLocalStorage",()=>n,"saveOptionsToLocalStorage",()=>l])},48342,e=>{"use strict";var t,i=((t={})[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t);function n(e){switch(e){case"w":case"ArrowUp":return 0;case"a":case"ArrowLeft":return 1;case"s":case"ArrowDown":return 2;case"d":case"ArrowRight":return 3;default:return null}}function l(e){switch(e){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1}}function r(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 0}}e.s(["DirectionEnum",()=>i,"getDirectionEnumFromKeyboardEventKey",()=>n,"getOppositeDirection",()=>l,"getRotatedDirection",()=>r])},33243,e=>{"use strict";var t=e.i(48342);class i{x;y;constructor(e,t){this.x=e,this.y=t}equals(e){return this.x===e.x&&this.y===e.y}getShifted(e,n=1){switch(e){case t.DirectionEnum.UP:return new i(this.x,this.y-n);case t.DirectionEnum.DOWN:return new i(this.x,this.y+n);case t.DirectionEnum.LEFT:return new i(this.x-n,this.y);case t.DirectionEnum.RIGHT:return new i(this.x+n,this.y)}}getDirectionOfAdjacentObject(e){for(let i of[t.DirectionEnum.UP,t.DirectionEnum.DOWN,t.DirectionEnum.LEFT,t.DirectionEnum.RIGHT])if(e.equals(this.getShifted(i)))return i;return null}}e.s(["default",()=>i])},10649,e=>{"use strict";var t,i=((t={})[t.EMPTY=0]="EMPTY",t[t.WALL=1]="WALL",t[t.GOAL=2]="GOAL",t[t.BOX=3]="BOX",t[t.PLAYER=4]="PLAYER",t[t.BOX_ON_GOAL=5]="BOX_ON_GOAL",t[t.PLAYER_ON_GOAL=6]="PLAYER_ON_GOAL",t);function n(e){switch(e){case 0:return"Empty";case 1:return"Wall";case 2:return"Goal";case 3:return"Box";case 4:return"Player";case 5:return"Box on goal";case 6:return"Player on goal"}}e.s(["LevelTileEnum",()=>i,"getTileTypeName",()=>n])},3205,e=>{"use strict";var t=e.i(91398);let i=(0,e.i(91788).memo)(n,(e,t)=>e.tileType==t.tileType);function n({className:e,content:i,tileSize:n}){return(0,t.jsx)("button",{style:void 0===n?{}:{width:n,height:n,fontSize:n/1.5},className:e,children:i})}e.s(["TileButton",()=>n,"TileButtonMemo",0,i])},58638,e=>{"use strict";function t(e,t,i){return[...Array(e)].map(()=>Array(t).fill(i))}function i(e,i,n){let l=t(e,i,n(0,0));for(let t=0;t<e;t++)for(let e=0;e<i;e++)l[t][e]=n(t,e);return l}function n(e){return i(e[0].length,e.length,(t,i)=>e[i][t])}function l(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){if(e[i].length!=t[i].length)return!1;for(let n=0;n<e[0].length;n++)if(e[i][n]!=t[i][n])return!1}return!0}function r(e,i,n=1){if(0==e.length)return t(2*n,2*n,i);let l=t(e.length+2*n,e[0].length+2*n,i);for(let t=0;t<e.length;t++)for(let i=0;i<e[0].length;i++)l[t+n][i+n]=e[t][i];return l}function a(e,t=1){return e.length-2*t<1||e[0].length-2*t<1?[]:i(e.length-2*t,e[0].length-2*t,(i,n)=>e[i+t][n+t])}e.s(["enlargeMatrixOnEachSide",()=>r,"getMatrixOfSize",()=>t,"getMatrixWithConditionalFill",()=>i,"getTransposedMatrix",()=>n,"matricesAreEqual",()=>l,"trimMatrixOnEachSide",()=>a])},73048,53871,67943,e=>{"use strict";function t(e){return[...e].reverse().join("")}function i(e,t){let i=[];for(let n=0;n<e.length;n+=t)i.push(e.substring(n,n+t));return i}function n(e){if(e.length<2)return[e];let t=[],i=0;for(let n=0;n<e.length+1;n++)(n==e.length||e.charAt(i)!=e.charAt(n))&&(t.push(e.substring(i,n)),i=n);return t}function l(e){return/^\d*[1-9]\d*$/.test(e)}function r(e,t,i){return e.substring(0,i)+t+e.substring(i+1)}e.s(["chunkString",()=>i,"getStringWithChangedCharAt",()=>r,"isStringAPositiveInteger",()=>l,"reverseString",()=>t,"splitStringToRepeatingGroups",()=>n],53871);let a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ*.",s=a.length,o=a[0],_=a[s-1];function u(e){if(0==e)return"0";let i="";for(;e>0;)i+=a[e%s],e=Math.floor(e/s);return t(i)}function c(e){let i=0,n=1,l=t(e);for(let t=0;t<l.length;t++){let r=a.indexOf(l[t]);if(-1==r)throw Error("Input is not in base64: "+e+", at: "+e[t]+", "+t);i+=n*r,n*=s}return i}function h(e){let t="",n=i(e,6);for(let e=0;e<n.length;e++)t+=u(Number.parseInt(n[e],2));return t}function f(e){let t="",i="0".repeat(6);for(let n=0;n<e.length;n++)t+=(i+c(e[n]).toString(2)).slice(-i.length);return t}e.s(["BASE64_BITS",0,6,"BASE64_ONES_CHAR",0,o,"BASE64_ZEROS_CHAR",0,_,"base64StringToBinaryString",()=>f,"base64ToDecimal",()=>c,"binaryStringToBase64String",()=>h,"decimalToBase64",()=>u],73048);var g=e.i(33243),d=e.i(58638);function v(e){let t=n(e),i="";for(let e=0;e<t.length;e++){let n=t[e],l=n.startsWith(_)?"(":n.startsWith(o)?")":"";if(n.length>2&&""!=l){let e=u(n.length);i+=l.repeat(e.length)+e}else i+=n}return i}function T(e){let t="";for(let i=0;i<e.length;){let n="("==e[i]?_:")"==e[i]?o:"";if(""==n)t+=e[i++];else{let l=i;for(;"("==e[i]||")"==e[i];)i++;let r=i-l;t+=n.repeat(c(e.substring(i,i+r))),i+=r}}return t}function m(e,t){return new g.default(Math.floor(e/t),e%t)}function x(e,t){return t*e.x+e.y}function w(e){return(0,d.getMatrixWithConditionalFill)(e.length,e[0].length,(t,i)=>!e[t][i])}function E(e){let t=[];for(let i=0;i<e.length;i++)for(let n=0;n<e[0].length;n++)e[i][n]&&t.push(new g.default(i,n));return t}function b(e,t){for(let i=0;i<e.length;i++)for(let n=0;n<e[0].length;n++)if(e[i][n]&&!t[i][n])return!1;return!0}function A(e,t=[]){let i="";for(let n=0;n<e.length;n++)for(let l=0;l<e[0].length;l++)(0==t.length||t[n][l])&&(i+=String(e[n][l]?"1":"0"));return i}function L(e,t,i,n=[]){let l=(0,d.getMatrixOfSize)(t,i,!1),r=0;for(let a=0;a<t;a++)for(let t=0;t<i;t++)(0==n.length||n[a][t])&&(l[a][t]=1==Number.parseInt(e[r]),r++);return l}function y(e){let t=(0,d.enlargeMatrixOnEachSide)(e,!1),i=t.length,n=t[0].length,l=[new g.default(-1,-1),new g.default(0,-1),new g.default(1,-1),new g.default(-1,0),new g.default(1,0),new g.default(-1,1),new g.default(0,1),new g.default(1,1)];return(0,d.getMatrixWithConditionalFill)(i,n,(e,r)=>{if(t[e][r])return!1;let a=!1;for(let s of l){let l=e+s.x,o=r+s.y;if(!(l<0)&&!(o<0)&&!(l>=i)&&!(o>=n)&&t[l][o]){a=!0;break}}return a})}e.s(["ALT_SEPARATOR",0,"_","SEPARATOR",0,"-","binaryStringToBitmap",()=>L,"bitmapToBinaryString",()=>A,"bitmapToCoordinates",()=>E,"canMaskBeUsedOnBitmap",()=>b,"compressBase64String",()=>v,"coordinatesToTileId",()=>x,"decompressBase64String",()=>T,"getInvertedBitmap",()=>w,"tileIdToCoordinates",()=>m,"trimmedPlayableMaskToWallBitmap",()=>y],67943)},11791,e=>{"use strict";var t=e.i(10649),i=e.i(58638),n=e.i(73048),l=e.i(67943),r=e.i(53871);function a(e){let t=s(e),i=s(e.getLevelTransposed());return i.length<t.length?(0,r.getStringWithChangedCharAt)(i,l.ALT_SEPARATOR,i.indexOf(l.SEPARATOR)):t}function s(e){var r,a;let s,c;return(0,n.decimalToBase64)(e.lenX)+l.SEPARATOR+(0,n.decimalToBase64)(e.lenY)+(r=e,l.SEPARATOR+(r.isInitialPlayerAtNoPlayerCoordinates()?"":(0,n.decimalToBase64)((0,l.coordinatesToTileId)(r.initialPlayer,r.lenY))))+(s=_(a=e,t.LevelTileEnum.WALL),c=(0,i.trimMatrixOnEachSide)(a.getPlayableAreaMask()),(0,i.matricesAreEqual)(s,(0,l.trimmedPlayableMaskToWallBitmap)(c))?l.ALT_SEPARATOR+u(c):l.SEPARATOR+u(s))+function(e){let i=_(e,t.LevelTileEnum.GOAL);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getPlayableAreaMask();if((0,l.canMaskBeUsedOnBitmap)(i,t))return l.ALT_SEPARATOR+u(i,t)}return l.SEPARATOR+u(i,o(e))}(e)+function(e){let i=_(e,t.LevelTileEnum.BOX);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getViableBoxMask();if((0,l.canMaskBeUsedOnBitmap)(i,t))return l.ALT_SEPARATOR+u(i,t)}return l.SEPARATOR+u(i,o(e))}(e)}function o(e){return(0,l.getInvertedBitmap)(_(e,t.LevelTileEnum.WALL))}function _(e,n){switch(n){case t.LevelTileEnum.WALL:case t.LevelTileEnum.GOAL:return(0,i.getMatrixWithConditionalFill)(e.lenX,e.lenY,(t,i)=>e.levelTiles[t][i]==n);case t.LevelTileEnum.BOX:{let t=(0,i.getMatrixOfSize)(e.lenX,e.lenY,!1);for(let i of e.initialBoxes)t[i.x][i.y]=!0;return t}default:throw Error("Bitmap encoding not supported for tile type: "+n)}}function u(e,t=[]){let i=function(e,t){if(0==e.length)return e;let i=e.at(-1);if(void 0===i)throw Error("Could not bit fill a binary string");return e+i.repeat((t-e.length%t)%t)}((0,l.bitmapToBinaryString)(e,t),n.BASE64_BITS);return(0,l.compressBase64String)((0,n.binaryStringToBase64String)(i))}e.s(["default",()=>a])},38676,99930,e=>{"use strict";var t,i=e.i(91398),n=((t={})[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE",t[t.CYAN=3]="CYAN",t);function l({content:e="Button",onClick:t,color:l=n.BLUE,paddedText:r=!0}){let a=function(e){switch(e){case n.BLUE:return"bg-blue-500 hover:bg-blue-700 ";case n.GREEN:return"bg-green-500 hover:bg-green-700 ";case n.RED:return"bg-red-500 hover:bg-red-700 ";case n.CYAN:return"bg-cyan-500 hover:bg-cyan-700 "}}(l)+(r?"py-2 px-4 ":"")+"text-white font-bold rounded ";return(0,i.jsx)("button",{className:a,onClick:t,children:e})}e.s(["ColorEnum",()=>n],99930),e.s(["default",()=>l],38676)},35125,e=>{"use strict";e.s(["NO_PLAYER_COORDINATES",()=>g,"default",()=>d],35125);var t=e.i(10649),i=e.i(33243),n=e.i(58638),l=e.i(48342);class r{parentLevel;player;boxes;turn;constructor(e,t,i,n){this.parentLevel=e,this.player=t,this.boxes=i,this.turn=n}isPlayerAt(e){return this.player.equals(e)}getBoxIdxAt(e){let t=this.boxes.findIndex(t=>t.equals(e));return -1==t?null:t}isWon(){return this.boxes.length>0&&this.boxes.every(e=>this.parentLevel.isGoalAt(e))}isPlayerAtNoPlayerCoordinates(){return g.equals(this.player)}createNewLevelStateForPlayerMove(e){if(this.isWon())return null;let t=this.player.getShifted(e);if(!this.parentLevel.isValidPlaceForObjectAt(t))return null;let i=this.getBoxIdxAt(t);if(null!=i){let n=t.getShifted(e);if(!this.canBoxBePushedTo(n))return null;this.boxes[i]=n}return new r(this.parentLevel,t,this.boxes,this.turn+1)}createNewLevelStateForClick(e){if(this.isWon()||this.isPlayerAtNoPlayerCoordinates()||this.player.equals(e)||this.parentLevel.isWallAt(e))return null;let t=this.getBoxIdxAt(e);if(null!=t){let i=this.player.getDirectionOfAdjacentObject(e);if(null==i)return null;{let n=e.getShifted(i);return this.canBoxBePushedTo(n)?(this.boxes[t]=n,new r(this.parentLevel,e,this.boxes,this.turn+1)):null}}let i=function(e,t,i,r,a){let s=(0,n.getMatrixOfSize)(e,t,!1),o=[i],_=[];s[i.x][i.y]=!0;let u=0;for(;o.length>0;){for(;o.length>0;){let e=o.pop();if(void 0===e)throw Error("Nothing to pop");if(r.equals(e))return u;for(let t of[l.DirectionEnum.UP,l.DirectionEnum.LEFT,l.DirectionEnum.DOWN,l.DirectionEnum.RIGHT]){let i=e.getShifted(t);a(i)||s[i.x][i.y]||(s[i.x][i.y]=!0,_.push(i))}}o=_,_=[],u++}return null}(this.parentLevel.lenX,this.parentLevel.lenY,this.player,e,e=>!this.parentLevel.isValidPlaceForObjectAt(e)||null!=this.getBoxIdxAt(e));return null==i?null:new r(this.parentLevel,e,this.boxes,this.turn+i)}canBoxBePushedTo(e){return this.parentLevel.isValidPlaceForObjectAt(e)&&null==this.getBoxIdxAt(e)}}let a={src:e.i(45163).default,width:512,height:512,blurWidth:0,blurHeight:0},s={src:e.i(31530).default,width:512,height:512,blurWidth:0,blurHeight:0},o={src:e.i(97287).default,width:512,height:512,blurWidth:0,blurHeight:0},_={src:e.i(95579).default,width:512,height:512,blurWidth:0,blurHeight:0},u={src:e.i(35910).default,width:512,height:512,blurWidth:0,blurHeight:0},c={src:e.i(93965).default,width:512,height:512,blurWidth:0,blurHeight:0},h={src:e.i(63584).default,width:512,height:512,blurWidth:0,blurHeight:0},f={src:e.i(80239).default,width:36,height:36,blurWidth:0,blurHeight:0},g=new i.default(-1,-1);class d{lenX;lenY;levelTiles;initialBoxes;initialPlayer;constructor(e,t,i,n,l){this.lenX=e,this.lenY=t,this.levelTiles=i,this.initialPlayer=l,this.initialBoxes=n}getInitialLevelState(){return new r(this,this.initialPlayer,Array.from(this.initialBoxes),0)}getTileAt(e){return this.levelTiles[e.x][e.y]}isInitialPlayerAt(e){return this.initialPlayer.equals(e)}isWallAt(e){return this.getTileAt(e)==t.LevelTileEnum.WALL}isGoalAt(e){return this.getTileAt(e)==t.LevelTileEnum.GOAL}isEmptyTileAt(e){return this.getTileAt(e)==t.LevelTileEnum.EMPTY}isInitiallyEmptyAt(e){return this.isEmptyTileAt(e)&&!this.isInitialPlayerAt(e)&&null==this.getInitialBoxIdxAt(e)}getInitialBoxIdxAt(e){let t=this.initialBoxes.findIndex(t=>t.equals(e));return -1==t?null:t}isValidPlaceForObjectAt(e){return e.x>=0&&e.y>=0&&e.x<this.lenX&&e.y<this.lenY&&!this.isWallAt(e)}isInitialPlayerAtNoPlayerCoordinates(){return g.equals(this.initialPlayer)}isCornerAt(e){if(!this.isValidPlaceForObjectAt(e))return!1;let t=!this.isValidPlaceForObjectAt(e.getShifted(l.DirectionEnum.UP)),i=!this.isValidPlaceForObjectAt(e.getShifted(l.DirectionEnum.LEFT)),n=!this.isValidPlaceForObjectAt(e.getShifted(l.DirectionEnum.DOWN)),r=!this.isValidPlaceForObjectAt(e.getShifted(l.DirectionEnum.RIGHT));return t&&i||i&&n||n&&r||r&&t}canBoxBePushedInDirectionAt(e,t){let i=e.getShifted((0,l.getOppositeDirection)(t)),n=e.getShifted(t);return this.isValidPlaceForObjectAt(n)&&this.isValidPlaceForObjectAt(i)}getLevelCopy(){return new d(this.lenX,this.lenY,this.levelTiles,this.initialBoxes,this.initialPlayer)}changeTileTo(e,t){this.levelTiles[e.x][e.y]=t}removeInitialBoxAt(e){this.initialBoxes=this.initialBoxes.filter(t=>!t.equals(e))}addInitialBoxAt(e){this.initialBoxes.push(e)}moveInitialPlayerTo(e){this.initialPlayer=e}changeLevelBasedOnBrushClick(e,i){let n=this.isInitiallyEmptyAt(e),l=this.isEmptyTileAt(e),r=this.isWallAt(e),a=this.isGoalAt(e),s=null!=this.getInitialBoxIdxAt(e),o=this.isInitialPlayerAt(e);switch(i){case t.LevelTileEnum.EMPTY:if(n)return;(r||a)&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),s&&this.removeInitialBoxAt(e),o&&this.moveInitialPlayerTo(g);break;case t.LevelTileEnum.WALL:if(r)return;(l||a)&&this.changeTileTo(e,t.LevelTileEnum.WALL),s&&this.removeInitialBoxAt(e),o&&this.moveInitialPlayerTo(g);break;case t.LevelTileEnum.GOAL:if(a)return;(l||r)&&this.changeTileTo(e,t.LevelTileEnum.GOAL);break;case t.LevelTileEnum.BOX:if(s)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),o&&this.moveInitialPlayerTo(g),this.addInitialBoxAt(e);break;case t.LevelTileEnum.PLAYER:if(o)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),s&&this.removeInitialBoxAt(e),this.moveInitialPlayerTo(e);break;default:throw Error("Tile change not supported for enum: "+i)}}changeLevelDimensions(e,i){let l=(0,n.getMatrixOfSize)(e,i,t.LevelTileEnum.EMPTY);for(let t=0;t<Math.min(e,this.lenX);t++)for(let e=0;e<Math.min(i,this.lenY);e++)l[t][e]=this.levelTiles[t][e];this.levelTiles=l,this.initialBoxes=this.initialBoxes.filter(t=>t.x<e&&t.y<i),(this.initialPlayer.x>=e||this.initialPlayer.y>=i)&&this.moveInitialPlayerTo(g),this.lenX=e,this.lenY=i}getLevelTransposed(){return new d(this.lenY,this.lenX,(0,n.getTransposedMatrix)(this.levelTiles),this.initialBoxes.map(e=>new i.default(e.y,e.x)),new i.default(this.initialPlayer.y,this.initialPlayer.x))}getPlayableAreaMask(){return this.isInitialPlayerAtNoPlayerCoordinates()?(0,n.getMatrixOfSize)(this.lenX,this.lenY,!0):function(e,t,i,r){let a=(0,n.getMatrixOfSize)(e,t,!1),s=[i];for(a[i.x][i.y]=!0;s.length>0;){let e=s.pop();if(void 0===e)throw Error("Nothing to pop");for(let t of[l.DirectionEnum.UP,l.DirectionEnum.LEFT,l.DirectionEnum.DOWN,l.DirectionEnum.RIGHT]){let i=e.getShifted(t);r(i)||a[i.x][i.y]||(a[i.x][i.y]=!0,s.push(i))}}return a}(this.lenX,this.lenY,this.initialPlayer,e=>!this.isValidPlaceForObjectAt(e))}getAllCornersInMask(e){let t=[];for(let n=0;n<this.lenX;n++)for(let l=0;l<this.lenY;l++){if(!e[n][l])continue;let r=new i.default(n,l);this.isCornerAt(r)&&t.push(r)}return t}getViableBoxMask(){let e=this.getPlayableAreaMask();for(let t of this.getAllCornersInMask(e))for(let i of(this.isGoalAt(t)||(e[t.x][t.y]=!1),[l.DirectionEnum.RIGHT,l.DirectionEnum.DOWN]))if(this.isValidPlaceForObjectAt(t.getShifted(i))){let n=[],r=t;for(;n.push(r),!this.isGoalAt(r);){if(n.length>1&&this.isCornerAt(r)){for(let t of n)e[t.x][t.y]=!1;break}let t=r.getShifted(i);if(this.canBoxBePushedInDirectionAt(t,(0,l.getRotatedDirection)(i)))break;r=t}}return e}transformTileAtCoordinates(e,t,i,n,l,r,a,s,o,_){let u=this.isEmptyTileAt(e),c=this.isWallAt(e),h=this.isGoalAt(e),f=_?null!=_.getBoxIdxAt(e):null!=this.getInitialBoxIdxAt(e),g=_?_.isPlayerAt(e):this.isInitialPlayerAt(e);if(c&&g||c&&f||f&&g)return o;if(c)return i;if(h&&f)return a;if(h&&g)return s;if(h)return n;else if(f)return l;else if(g)return r;else if(u)return t;else return o}getSvgForTile(e,t,n){return this.transformTileAtCoordinates(new i.default(e,t),a,s,o,_,u,c,h,f,n)}getCharForTile(e,t,n){return this.transformTileAtCoordinates(new i.default(e,t),"","■","⸱","ⵔ","ᐳ","ⵙ","ᐷ","☠",n)}getTileEnumForTile(e,n,l){return this.transformTileAtCoordinates(new i.default(e,n),t.LevelTileEnum.EMPTY,t.LevelTileEnum.WALL,t.LevelTileEnum.GOAL,t.LevelTileEnum.BOX,t.LevelTileEnum.PLAYER,t.LevelTileEnum.BOX_ON_GOAL,t.LevelTileEnum.PLAYER_ON_GOAL,t.LevelTileEnum.EMPTY,l)}}},27353,e=>{"use strict";var t=e.i(35125),i=e.i(73048),n=e.i(67943),l=e.i(58638),r=e.i(10649),a=e.i(33243);let s="Invalid code";function o(e){let r=e.replaceAll(n.ALT_SEPARATOR,n.SEPARATOR).split(n.SEPARATOR);if(6!=r.length)throw Error(s);let o=e.split("").filter(e=>e==n.ALT_SEPARATOR||e==n.SEPARATOR).map(e=>e==n.ALT_SEPARATOR).reduce((e,t)=>[...e,t],[]);try{let e=(0,i.base64ToDecimal)(r[0]),s=(0,i.base64ToDecimal)(r[1]),c=0==r[2].length?new a.default(-1,-1):(0,n.tileIdToCoordinates)((0,i.base64ToDecimal)(r[2]),s),h=o[2]?(0,n.trimmedPlayableMaskToWallBitmap)(_(r[3],e-2,s-2)):_(r[3],e,s),f=new t.default(e,s,u(h,(0,l.getMatrixOfSize)(e,s,!1)),[],c),g=(0,n.getInvertedBitmap)(h),d=_(r[4],e,s,o[3]?f.getPlayableAreaMask():g);f.levelTiles=u(h,d);let v=_(r[5],e,s,o[4]?f.getViableBoxMask():g);if(f.initialBoxes=(0,n.bitmapToCoordinates)(v),o[0])return f.getLevelTransposed();return f}catch{throw Error(s)}}function _(e,t,l,r=[]){let a=(0,i.base64StringToBinaryString)((0,n.decompressBase64String)(e));return(0,n.binaryStringToBitmap)(a,t,l,r)}function u(e,t){return(0,l.getMatrixWithConditionalFill)(e.length,e[0].length,(i,n)=>e[i][n]?r.LevelTileEnum.WALL:t[i][n]?r.LevelTileEnum.GOAL:r.LevelTileEnum.EMPTY)}e.s(["default",()=>o])},72758,e=>{"use strict";let t=["j-b-21_1wc7wA..BYEZ0U40M40we1Me1M_)8f._gkwo)3","e-a-1a_*fzX*Nf.QJLfPTZT_.Y)a_)3y53Mf","h-a-2d_1gs71Ms70wbK.HXS.Eo6_.*)8_)3.0GA0","j-e-2n_fLf.fLfL24fLfLfLfLfy80*0*0*0*0*0*0_)ff(3_EfciUcz4w)4","h-d-2Z_3w70e0s0U1M1023.Bve.BZfWVtM0_..)a_)338OxF2","c-b-1A_*7MY7L9V*8j..X._.Y)8_001gylQ","c_d-v_0sI(3NO2ue.ZUXNS00_)6M73xM_owgNk0c0","g_g-1x_c03.YTvfXPm6.D.nv.Yc0fM3Y0.0fM3Y0_)fv(3_2aF52l1gxk)5","h-e-o_040c0c0c040.c.f.8.8.*v*4*c*c*c_)afCPU_hExR18g0080","j-g-x_tKfvx*ovM7TZ01.vvTTZZ.vv.TZZ.vk1D.v.Uf.._0030M)h1.0.T.._E60wyaGrMzNxhyA)5","f_j-J_030360vY1*g6DMbZ0vrwfvsj..Nwfw0t00*00_)cwr.._wBEm4gp)5","h-d-1v_.N0zZ5Wb*nQLVv2*vL.1U3X..Mfw_)d1Y3.._01kKFlg2)4","j-d-1i_fMnZT.VcmvYvU6jxD.wHf*qI.NGx.z.0_)f.F.w0_ly82yE0k1x)3","g_i-K_0v1ZY7s0h*t.Vkv.s8Hu*L*O.zEf*w8W0*U01w_)33Y1*fM)c_n00g)3EhsyI400","g_h-1r_7o0.05U3VUrX3vU8jXvnv*zvsUw7S0TM0e0_)81Y1Y7M)4_8gA2g9204O030","e-f-O_Y0uUfZXRYjUes783.3TxWM6o1Y_)9Ue3f._hais4E1k00","e_g-2y_7K1.wuM0dz.YSr4MLwK.L.Xx80u0_Mo6)c_)54iAw","d_j-P_1ZM2.w4Q3sve.T.P94KWbTQZr9..P01._841xw700o)9_)3g4w3yQ800","j-g-1x_e3j.S*dxXZY..TplSnhQD5.N0ov*01M0Y0f02M0._)i(3_M1M9km0w0c)5","j-g-3y_v*40xuUnLZT*tXO4Y.LZ.N7JZPvs0w7.V.*5lx.U_)k80f(3_m0c20k5E21lg)4","f-f-10_PwvTcyC.P9hAK.Vz.P*p.w0Y0*0v0_)d.m._4A0c3a2yg00","g_j-1m_Y1xXvv.TXZL.01nvSC.Jv.WX*TMxLz.v..ge3.T._)91.0.0vU7I)a_a99l8g0w08180boygkww","j-e-N_f*f.f.10.*.*20(40gv*v*f*103.3.07_.*.w)i_)6lliw22Egyww0","g_j-4d-..Ug07E02n.Oe003L49whBNbeUK7v2jLwqmx01g88F07QOi3..0_.Y.*g)m_)31E188g0B10y4EDx0","g_j-22-Y00j..910AHUjg096.fy3YV1*ohwc25uZ05g0yEM3TXYo12f.x._0vUe3.)i_00100MEu0dY200b","f-c-2B_f3.fY0z.fY4ZXTJuAXPL0U_)7Yf7w0w0_9k4521022n","j-d-2d_c1UXTTJLru*NIVv*Jnrz.*3VZiGD.7K0_.7wY71M)e_00M08a0cj0xd05yw","h-f-n_6M3U180L0TYUutLe.DXTJ.M.Pb3S3.3.w_)eNZ.o._485koymcxE8)4","d_j-1n_U01U01nY2ZtZ.LUw2P.QD.H02v..ZTt._)8fYfY)6_wM2g82Bl4x0","j-e-1b_eef*e42Q2T7.7nTgUu.*gsM0.uTv.vT.06_)d7w*1I3U_Mw13x44i30Agw","g_i-*_c00Ps7vMvLpO.ZH..YzWS6cor.wfM1U0700s00_)eu3(3_6yhiE0t2lx)5","d-f-j_406Y7u3.1TwwwT(3N.w.w0M_7zMYs)8_x0g02bhwHg","f_c-22-..MpM1ZxwxwLyzAxAxwLY5wBMxVx.._)adxYu60_8ChMgQ04210","f_e-Q_vMlUuI*S*Ph.vXnVoPuiu*7U60_You7w)b_0401i9kE2l0","j-g-2y_UvfS.IZj.vPufQO.cBhZT.7S0tv.t0f.3RMZsfs0_)i17wu7xU_2At4B2E0043)6","g_j-2f-00*vfN8Y0A6Sq005MS3bXUJYMkeUq4sV0wgwz8vMU1040w20v.0_)hT(3_lg2wB0e5k3hw)4","j-f-2k_*0v0dY6KPvZXKYTu.epVLhWI.*bX5w703.1.w_..Nwo0M)f_)4S0EM4Mc6k21v","b-b-1p_o3.qX*ni*Wn*0M_)3UNM)3_8Ag1w28","j-g-2P_ffD.VZuvnx50h.vvTYZZ*v7C10vg5kfRz.U.gfQ0_)iZ7*fTU_0CPyE8wDrgkw)6","g_h-12_3.Mq.3moiW7TgXW3*gSu7DgfKZw5U0.w7Y0_)d3PTzM_6I2a2508r)4","j-f-47_0*0p07w2g180A0i1F1QxWh.V*I.gvvDLU7Y3c_uhlh220o)8_)38wE4A7ka.","d_i-Q_1*0Y.Oi*fXX.JX*.L.vyfz.*f.U1M0_)47U1*0.0fM)7_2wR06)3iwd4yiiiv","j-b-1G_3M*5MEtO*vx4.Cmmv.Pqivrv3v_sXw)c_)358g4A0o0","f_j-12_s00E01.w3Ce4fY8booj.TQD.HEcvM0Kw1503._)bs7700_0b8gy1g)4","e_g-2l_UMefzPUuvzPWu*OyeL(3X.c3200_VMu3Me)b_0gi11h2A8xbv","g_e-1J_.MwmL..LfIcI5*7U5*4W62f*fUfU_)d1(3_l84C38Eg)4","i-b-17_fzcvWTnPSmOSvTe.2o3xYfxY_)b7(3_9n0hg45yE)4","g_d-2L_eUvM.x.3*1M3w23(3T.f*vYMo_(5Y)a_Jllllk00GGGGEE","f_g-2T_0o0701U0v0vUQ6ZvH.HRWc8wv81.0p._)5f0f0Y)4_78w08g4wl0","j-g-D_1M0s03.6.P.hXYZseR3tMVwd.3Icn..Y.TLT2M0U_00c0U7wu7)e_qgk21kgg1)310o0"],i=["6-7-h_.YNw_900_gf","7_6-f_*(3_04M0_r","9-6-E_tvZ7v_20w0_07","6_8-m_(33_0s00_s0","8-7-v_7(4_0a0E0_2G","6_c-y_Yv.u.U0_)3s0_Mg0","7-8-u_(5_0kak0_mB","c_8-e_ff4444YKWe_o)4_c00","6-7-9_NPP._w0._c0","8_b-K_0U50L.GDY_B)4_0G0","9-8-O_77*yK*e_44)3_030","9-8-A_MUXv757_0060_E0","7-9-k_UvTUoc_U)3_1a0","7-6-x_*.Hw_80w_3","9-7-H_oNy7Zv_0gw0_1w","a-8-Q_7.Tgvvf3_w1g)3_)3.","6-7-f_..U._gx0_ig","7-9-x_Yqd..0_g800_1w0","8_8-j_..2666_6)3_0M","9-8-q_MMT.Qks_)3E_8w","7-6-x_XTl._220_k","9_7-B_V.GTLo_5)4_0o","7-7-p_N.vY0_0g8_60","7-7-B_ev*Z._1080_4g","7-7-p_7.XD0_24g_4L","6-8-p_6S.._244_l0","7-7-C_.m.z0_20w_08w","7-7-g_V.UN._0wg_i0","b-9-X_3zhEQrJW.T0_)42w_E0","6-7-i_.ZXw_8h0_4L","7-7-g_cX.P._21g_I0","7-7-C_t.X60_h20_9f","7-7-C_.ZS.._G)3_0e0","6_9-s_cv(3_01U0_1U","6-a-L_vL..0._*)3_0V4","5_f-G_M0v(4_003U0_GE00","9-8-J_ssscf5._001M_iw0","a-7-w_ZaTHRH._12040_5w","a-9-O_XRvV1UY630_)32w_0c0","7-6-m_f.Y._14g_ig","8-6-8_XZ.O_00y._I0","7-8-y_757.*_003._3w","9-9-10_73xUYhY*0_)33._2M0","5-3-4_._f_w","6-7-q_.L*._x40_0f","7-8-B_sTJLY_020f_c0","b-7-i_uLuLqScv_00g80_y00","8-8-p_**A.f7_0s)3_2k","a_8-a_YQYU8rvv_)3s0_Q0","a-7-I_oP.mJi._)3k0_o00","8-7-C_VNXOD_01w0_50","6-8-x_uu.._0330_3M","7-7-q_t.vT0_60M0_kb","c-8-l_67ff74S**U_)33M0_Bw0","a-8-h-Y9qmAd*1wvIa3w_)3v_2w0","7-6-y_P.t._210_o","8-9-t_31LToe7_0050_0A","7-7-p_VZWT0_j00_j0","9_d-A_.Z0q.Z*.1Cf0v_)61M_0130","a-a-m_e.*3IH*TAfU_)6f_2kg0","a_9-x_.gHQi..720_07)3v_4d0","6_d-B_7D..Yv00_01U00_s80","j-6-1z_Pft4hfYy8zc._)3k00_0880","9_a-V_ufzUc1sv60_0068g_b10","9-9-Y_33Z*XT.1._A44)3_43w0","e_9-d_427SKXtKWTNMUs_2)5k0_w50","7-8-b_UK.t7_04c0_B0","a-7-q_f.bScoM_1M00_0b0","b-8-d_..5tv8..7_00x8)3_002n","8-a-l_XfXKpTtM_033)3_o17","9_d-t_*VZ*hd.rKM1.._009)6_E00","b_a-r_c7ZT4dPYXe30_)4320_gwg","8-a-T_X.JGoTZz_412)3_4840","b-8-y_6*Ttfooss_)4f_xk00","7_a-C-vP1E.w7wjx3._u)4_0an","a-b-f_v7YN.X0h*fNw_)3e)3_)3F","7_b-d_.T2nX.s0_7w)3_0iE0","8_b-V_v7Y.y8vVY_)4*0_lk00","a-6-D_f.HP.._0c800_4M","a-b-P_U7MiXnfV7v3U_08)31M_ggM0","6-9-w_6v..f_03w0_0T","8-8-l_T.Ntvc_0U)3_gE","a_8-X_Y*vnivvo_)32B0_H)3","a_c-Q_.34dUnxu4gvZN._e)6_0ig00","b-b-E_1z.oHvqHvr70U0_)31M)3_0w1020","9-8-k_7fru*Qs_1C)3_4Ew","9-a-M_r7VLrSfzU0_011107_c0M0","b-c-x-0fvF09vVg3M1DVw3.*001*_)5G_5g)3","a-9-U_Moc3Z7.LY0_0f)4_w81g","7_a-e_vDUA(3_001wo_Ai0","b-5-m_.*Pv._01U0_k2w","f-a-1R_30PI*1Mk710g47Znv0_)4e00_1o00","b-b-Y_tTLZ..77.Z.LtM_)4sks)4_0ia0EA0","9-8-h_S*SkS.T_01900_N00","8-8-9_(6_0icci0_qpo","b-b-Y_60MS6j..j3gu30_002w020_4180","e-a-e_f2YJW.Zwo410g410_)5v_9k10","g-a-28_XfP*ry0w86V.0Ms73MU_)5v)3_lgw00","a_m-1r_007001jUrY*6*d.AfMj.07.M1w0_)6Y)5_)4qw0","8-8-h_..g..7_u)4_2wb","d-d-1l_0U1jLBOe*5kfK9Q*Vg3w0_0208210400_84w210","8_b-A_Z*.*vP1Uf_Y)6_061v","8-8-P_eb..Qs_41w8_3c0","9_9-y_3.*Fs*630_)3e0_4M0","b_b-Y_oTn.VYvNY..noM_00r)36M00_1544kg0","a-9-k_6vdCPp.Wx._14h200_44q0","8-8-S_(6_0eiiu0_*pU","f-8-s_*.lv66626*S*s_ak)6_)3a5","9-d-T_3073.5fefQ9.._)6*_gia00","9-9-Q_63fDs*oc0_0E50_wA7","c_9-13_Yv.UcSufDNE._0e7)5_006mv","a-d-M_s1E.Z.XS3d.ve60_)448y0w_8a8g00","e-d-17_f0u1E7obUtM107wfUfMe0o_021k)5_0083w","b-9-M_XvWvtYS31wM_)3ghl0_3314","c-8-B_ovnrXLWuoo_00x44w0_5190","7_a-w_1N..*wU_7M)3_0*0","b-a-1i_7LHWlRZuXLhY_gEE)5_011y3","a-a-B_oef.UTE.7MM_)4f00_q400","a_9-D_f4THRWb.v0_)470_q0","b-b-B_tX.kycn2UO7Me0_)31C00_Nw00","b-b-Q_cT.*t2Uo31Ub1._0gu)4_A42v","b-c-G_.q.LmupVw60o1M7_)6lL_Ug800","f-b-15_M60M60..T7w4ex*eNYc0_)5F2w0_Jg)5","9_e-v_.v.vi9nZntg1v._)3I)6_I)3","d-8-1j_777626S*Tt7_d8)4_01gM","7_c-x_v..*GHXw0_.w)4_0fU0","a-9-o_7LRTjI*rc0_)31U0_383","b-8-B_orX.WmQYM_808420_xM0","b-8-x_orX.WmYUU_8084h0_xN0","c-7-w_VPXQevTL._)31l0_Fw00","b_7-n_VPy..uNw_2I)3_0ao","a-8-h_U.lvccee_r)4_894","8_a-H_v7Yx..Ys_aG)4_00BD","c-a-L_o61.8PV*nAb*Vw_0060c)3_g01w20","b-7-B_ZHR*DaZ._)4Cv_G400","9-8-P_fZJLG*e_Eh)3_20n","d-a-1b_e3Yh7hY9v*zUs70_01l)5_)3lg","b_c-O_c3MbM.2HK.3Y6wu_0ae)5_006b0","c_g-1l_o0fM3Y0W0eM0fz3fMvYus7w0_1NM)7_004k1E","e-9-D_.oTLT.A677Dzxw_f)8_)3qw","a-9-H_3x*.R9T.Z._)34f20_gwdw","9-9-E_63fDY*oc0_0hh00_51g","f_9-1D_MvdCzM8427OH.Te0_084)3u0_x09h0","c-c-14_1xTD*ZXZ2.uZ.DK60_01gb5Czga00_u60pw67w","b-b-U_70UfD.Z..fwU70_0ye1wsh0_3Aii9M","9-9-E_vv(5v0_8yagiy8w_3Ai94U0","a_c-w_0v.svuZY6Mb0U0_4h)5_004A0","f-7-I_VrvuH.LoNz7_0My)4_01l","a-c-e_g3t..q9Lww2080_)4g._wj00","8_f-16_1wfM4X.T..61w_03e)4_20n)3","c-a-13_7z8.X.U21wo71._)53._2I)3","9_f-1I-.u448IIAgiyVd0BHOI01(3_04)6g2w_84)3E","d-a-F_.Mf..Q3..Mb..*0_.Y)9_021k0l0l0","h_t-6S_v(3W)31n(3Gw005l..*GE00llv.WGG01lln.WGGw0lln.*GG005lv..GE001Z(4_)v1)5_00w","u-h-5i-vM*A.5f8G0kuUxR7WW0l7WG1hmH*B0BaFaknSLIBggaAARLL91jiiyLJ5gqqASBLB90aiuTLBCi8c0jYAYL.f-0c)5g4)380060o)po-0c)5g)480060o)ag)eo"],n=t[0],l=i[0],r=`    #####
    #   #
    #$  #
  ###  $##
  #  $ $ #
### # ## #   ######
#   # ## #####  ..#
# $  $          ..#
##### ### #@##  ..#
    #     #########
    #######
`;e.s(["DEFAULT_CSB_CODE_FOR_EDITOR",0,l,"DEFAULT_CSB_FOR_GAME",0,n,"DEFAULT_XSB_CODE",0,r,"ERROR_CSB_CODE",0,"1-1-0-._._","MICROBAN_CSB_CODES",0,i,"ORIGINAL_LEVELS_CSB_CODES",0,t])},91426,e=>{"use strict";var t=e.i(91398),i=e.i(91788),n=e.i(26019),l=e.i(3205),r=e.i(91524);function a({level:e,levelState:a,tileOnClickHandler:s=()=>{},verticalSpaceTakenPx:o=200}){let _=(0,r.getOptionsFromLocalStorage)(),u=_.grid,c=_.textGraphics;function h(){return{width:void 0===globalThis.window?0:globalThis.window.innerWidth,height:void 0===globalThis.window?0:globalThis.window.innerHeight}}let[f,g]=(0,i.useState)(h());(0,i.useEffect)(()=>{globalThis.window.addEventListener("resize",()=>g(h()),!1)},[]);let d=Math.max(2,Math.min(80,Math.floor(Math.min((f.width-40)/e.lenX,(f.height-o)/e.lenY))));void 0!==globalThis.document&&(document.documentElement.style.setProperty("--tile-size",d+"px"),document.documentElement.style.setProperty("--tile-font-size",d/1.5+"px"));let v="tile "+(u?"border-[1px] border-black ":"");function T(t){let i=t.currentTarget.getBoundingClientRect();s(Math.min(e.lenX-1,Math.floor((t.clientX-1-i.left)/d)),Math.min(e.lenY-1,Math.floor((t.clientY-1-i.top)/d)))}return(0,t.jsx)("div",{className:"flex border-1",onMouseDown:T,onMouseOver:e=>1&e.buttons?T(e):{},children:Array.from({length:e.lenX},(i,r)=>(0,t.jsx)("div",{className:"whitespace-nowrap",children:Array.from({length:e.lenY},(i,s)=>{let o={content:c?e.getCharForTile(r,s,a):(0,t.jsx)(n.default,{draggable:"false",loading:"eager",src:e.getSvgForTile(r,s,a),alt:"Tile",height:80,width:80}),className:v,tileType:e.getTileEnumForTile(r,s,a)};return(0,t.jsx)(l.TileButtonMemo,{...o},"Tile, x:"+r+", y:"+s)})},"Tile row:"+r))})}e.s(["default",()=>a])},3828,(e,t,i)=>{t.exports=e.r(26990)},17139,e=>{"use strict";var t=e.i(91398),i=e.i(91788),n=e.i(33243),l=e.i(10649),r=e.i(91426),a=e.i(11791),s=e.i(53871);function o(){return(0,t.jsx)("div",{className:"border-t border-1"})}var _=e.i(75149),u=e.i(27353),c=e.i(59015),h=e.i(31462),f=e.i(38676),g=e.i(17892);function d({onImport:e}){let[n,l]=(0,i.useState)(""),[r,a]=(0,i.useState)(""),[s,o]=(0,i.useState)(!1),d="⇩ Import";return(0,t.jsx)(_.default,{onOpen:function(){l(""),a("")},isOpen:s,setIsOpen:o,buttonContent:d,title:"Import level",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{codeType:g.CodeTypeEnum.CSB_CODE,value:n,readOnly:!1,onChange:e=>l(e.target.value)}),(0,t.jsx)(f.default,{content:d,onClick:function(){try{let t=(0,u.default)(n);e(t),o(!1)}catch{alert("Invalid CSB code")}}}),(0,t.jsx)("div",{className:"my-4"}),(0,t.jsx)(h.default,{codeType:g.CodeTypeEnum.XSB_CODE,value:r,readOnly:!1,onChange:e=>a(e.target.value)}),(0,t.jsx)(f.default,{content:d,onClick:function(){try{let t=(0,c.getLevelFromXsbCode)(r);e(t),o(!1)}catch{alert("Invalid XSB code")}}})]})})}var v=e.i(24507);function T({level:e}){let[n,l]=(0,i.useState)(!1),[r,s]=(0,i.useState)(""),[o,u]=(0,i.useState)("");return(0,t.jsx)(_.default,{onOpen:function(){s((0,a.default)(e)),u((0,c.getXsbCodeFromLevel)(e))},isOpen:n,setIsOpen:l,buttonContent:"⇧ Export",title:"Export level",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{codeType:g.CodeTypeEnum.CSB_CODE,value:r,readOnly:!0}),(0,t.jsx)(v.default,{textToCopy:r}),(0,t.jsx)("div",{className:"my-4"}),(0,t.jsx)(h.default,{codeType:g.CodeTypeEnum.XSB_CODE,value:o,readOnly:!0}),(0,t.jsx)(v.default,{textToCopy:o})]})})}var m=e.i(41158),x=e.i(59196),w=e.i(48342),E=e.i(99930);function b({initialLevel:e}){let[_,u]=(0,i.useState)(e),[c,h]=(0,i.useState)(l.LevelTileEnum.WALL),[g,v]=(0,i.useState)(_.lenX+""),[b,A]=(0,i.useState)(_.lenY+""),L=[l.LevelTileEnum.EMPTY,l.LevelTileEnum.WALL,l.LevelTileEnum.GOAL,l.LevelTileEnum.BOX,l.LevelTileEnum.PLAYER];return(0,i.useEffect)(()=>{function e(e){let t=(0,w.getDirectionEnumFromKeyboardEventKey)(e.key);if(null!=t){let e=t==w.DirectionEnum.UP?-1:+(t==w.DirectionEnum.DOWN);h(Math.max(0,Math.min(L.length-1,L.indexOf(c)+e)))}}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-row border-black border-2 w-106 p-2 mx-auto rounded-[10] bg-gray-100",children:[(0,t.jsxs)("div",{className:"pl-2 w-28",children:[(0,t.jsx)("p",{className:"text-xl",children:"Tile brush:"}),L.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:"brushRadio",value:e,checked:c==e,onChange:()=>h(e)})," ",(0,l.getTileTypeName)(Number(e))]}),(0,t.jsx)("br",{})]},"Brush radio div for enum: "+e))]}),(0,t.jsx)(o,{}),(0,t.jsxs)("div",{className:"w-40 px-4",children:[(0,t.jsx)("p",{className:"text-xl",children:"Set level size:"}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-3 gap-3",children:[(0,t.jsx)("p",{children:"Width:"}),(0,t.jsx)("input",{type:"text",value:g,minLength:1,maxLength:3,className:"outline resize-none h-6 ml-3 bg-white w-8 pl-[2px]",onChange:e=>v(e.target.value)}),(0,t.jsx)("br",{}),(0,t.jsx)("p",{children:"Height:"}),(0,t.jsx)("input",{type:"text",value:b,minLength:1,maxLength:3,className:"outline resize-none h-6 ml-3 bg-white w-8 pl-[2px]",onChange:e=>A(e.target.value)}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsx)(f.default,{content:"Set level size",onClick:()=>(function(){if((0,s.isStringAPositiveInteger)(g)&&(0,s.isStringAPositiveInteger)(b)){let e=Number.parseInt(g),t=Number.parseInt(b);if(e>500||t>500)return void alert("Maximum allowed width and height is 500");_.changeLevelDimensions(e,t),u(_.getLevelCopy())}else alert("Both values must be positive integers")})()})})]})]}),(0,t.jsx)(o,{}),(0,t.jsxs)("div",{className:"pl-4 pt-1 flex flex-col justify-center",children:[(0,t.jsx)(T,{level:_}),(0,t.jsx)("div",{className:"my-1"}),(0,t.jsx)(d,{onImport:e=>(function(e){try{u(e),v(e.lenX+""),A(e.lenY+"")}catch{alert("Invalid CSB code.")}})(e)}),(0,t.jsx)("div",{className:"my-2"}),(0,t.jsx)(m.default,{className:"pl-2",href:{pathname:x.GAME_PAGE_PATH,query:{level:(0,a.default)(_)}},children:(0,t.jsx)(f.default,{content:"⯈ Play",color:E.ColorEnum.CYAN})})]})]}),(0,t.jsx)("div",{className:"my-4 flex justify-center",children:(0,t.jsx)(r.default,{level:_,tileOnClickHandler:function(e,t){_.changeLevelBasedOnBrushClick(new n.default(e,t),c),u(_.getLevelCopy())},verticalSpaceTakenPx:250})})]})}var A=e.i(11205),L=e.i(3828),y=e.i(72758);function p(){let[e,n]=(0,i.useState)(null),l=(0,L.useRouter)();return(0,i.useEffect)(()=>{if(!l.isReady)return;let e=l.query.level;if(e?.constructor===String)try{n((0,u.default)(e));return}catch{}n((0,u.default)(y.DEFAULT_CSB_CODE_FOR_EDITOR))},[l.isReady,l.query.level]),(0,t.jsxs)("div",{children:[(0,t.jsx)(A.default,{activatePage:A.PagesEnum.EDITOR}),(0,t.jsx)("div",{className:"mt-4",children:null!=e&&(0,t.jsx)(b,{initialLevel:e})})]})}e.s(["default",()=>p],17139)},33726,(e,t,i)=>{let n="/editor";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(17139)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/f4fe8aeb8343dcd3.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);