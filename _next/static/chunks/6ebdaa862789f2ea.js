(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41054,e=>{e.v("/sokoban-react/_next/static/media/logo.536fba4b.svg")},31530,e=>{e.v("/sokoban-react/_next/static/media/wall.bd91bc79.svg")},97287,e=>{e.v("/sokoban-react/_next/static/media/goal.ffa462d1.svg")},95579,e=>{e.v("/sokoban-react/_next/static/media/box.77815d28.svg")},35910,e=>{e.v("/sokoban-react/_next/static/media/player.7e213bae.svg")},93965,e=>{e.v("/sokoban-react/_next/static/media/box_on_goal.b71cdb00.svg")},63584,e=>{e.v("/sokoban-react/_next/static/media/player_on_goal.a3786ba2.svg")},80239,e=>{e.v("/sokoban-react/_next/static/media/error.c0755453.svg")},45163,e=>{e.v("/sokoban-react/_next/static/media/empty_tile.bbfc06e6.svg")},63646,e=>{"use strict";let t="options";function i(){let e=void 0===globalThis.window?null:localStorage.getItem(t);if(null==e)return{grid:!1,textGraphics:!1};let i=JSON.parse(e);return{grid:i.grid??!1,textGraphics:i.textGraphics??!1}}function l(e){localStorage.setItem(t,JSON.stringify(e))}e.s(["getOptionsFromLocalStorage",()=>i,"saveOptionsToLocalStorage",()=>l])},33243,48342,e=>{"use strict";var t,i=((t={})[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t);function l(e){switch(e){case"w":case"ArrowUp":return 0;case"a":case"ArrowLeft":return 1;case"s":case"ArrowDown":return 2;case"d":case"ArrowRight":return 3;default:return null}}function n(e){switch(e){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1}}function r(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 0}}e.s(["DirectionEnum",()=>i,"getDirectionEnumFromKeyboardEventKey",()=>l,"getOppositeDirection",()=>n,"getRotatedDirection",()=>r],48342);class a{x;y;constructor(e,t){this.x=e,this.y=t}equals(e){return this.x===e.x&&this.y===e.y}getShifted(e,t=1){switch(e){case i.UP:return new a(this.x,this.y-t);case i.DOWN:return new a(this.x,this.y+t);case i.LEFT:return new a(this.x-t,this.y);case i.RIGHT:return new a(this.x+t,this.y)}}getDirectionOfAdjacentObject(e){for(let t of[i.UP,i.DOWN,i.LEFT,i.RIGHT])if(e.equals(this.getShifted(t)))return t;return null}}e.s(["default",()=>a],33243)},3205,99107,68729,21946,18754,18896,27141,26184,62940,e=>{"use strict";var t=e.i(91398);let i=(0,e.i(91788).memo)(function({className:e,content:i}){return(0,t.jsx)("button",{className:e,children:i})},(e,t)=>e.tileType==t.tileType);e.s(["TileButtonMemo",0,i],3205);let l={src:e.i(31530).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,l],99107);let n={src:e.i(97287).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,n],68729);let r={src:e.i(95579).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,r],21946);let a={src:e.i(35910).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,a],18754);let s={src:e.i(93965).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,s],18896);let o={src:e.i(63584).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,o],27141);let u={src:e.i(80239).default,width:36,height:36,blurWidth:0,blurHeight:0};e.s(["default",0,u],26184);let h={src:e.i(45163).default,width:512,height:512,blurWidth:0,blurHeight:0};e.s(["default",0,h],62940)},10649,e=>{"use strict";var t,i=((t={})[t.EMPTY=0]="EMPTY",t[t.WALL=1]="WALL",t[t.GOAL=2]="GOAL",t[t.BOX=3]="BOX",t[t.PLAYER=4]="PLAYER",t[t.BOX_ON_GOAL=5]="BOX_ON_GOAL",t[t.PLAYER_ON_GOAL=6]="PLAYER_ON_GOAL",t);function l(e){switch(e){case 0:return"Empty";case 1:return"Wall";case 2:return"Goal";case 3:return"Box";case 4:return"Player";case 5:return"Box on goal";case 6:return"Player on goal"}}e.s(["LevelTileEnum",()=>i,"getTileTypeName",()=>l])},91426,e=>{"use strict";var t=e.i(91398),i=e.i(33243),l=e.i(91788),n=e.i(26019),r=e.i(3205),a=e.i(99107),s=e.i(68729),o=e.i(21946),u=e.i(18754),h=e.i(18896),c=e.i(27141),f=e.i(26184),d=e.i(62940),g=e.i(63646),T=e.i(10649);function m({level:e,levelState:m,tileOnClickHandler:A=()=>{},verticalSpaceTakenPx:x=100}){let v=(0,g.getOptionsFromLocalStorage)(),E=v.grid,y=v.textGraphics;function b(){return{width:void 0===globalThis.window?0:globalThis.window.innerWidth,height:void 0===globalThis.window?0:globalThis.window.innerHeight}}let[L,p]=(0,l.useState)(b());(0,l.useEffect)(()=>{globalThis.window.addEventListener("resize",()=>p(b()),!1)},[]);let P=Math.max(2,Math.min(80,Math.floor(Math.min((L.width-40)/e.lenX,(L.height-x)/e.lenY))));void 0!==globalThis.document&&(document.documentElement.style.setProperty("--tile-size",P+"px"),document.documentElement.style.setProperty("--tile-font-size",P/1.5+"px"));let O="tile text-2xl "+(E?"border-[1px] border-black ":"");function w(t){let i=t.currentTarget.getBoundingClientRect();A(Math.min(e.lenX-1,Math.floor((t.clientX-i.left)/P)),Math.min(e.lenY-1,Math.floor((t.clientY-i.top)/P)))}return(0,t.jsx)("div",{className:"flex border-1",onMouseDown:w,onMouseOver:e=>1&e.buttons?w(e):{},children:Array.from({length:e.lenX},(l,g)=>(0,t.jsx)("div",{className:"whitespace-nowrap",children:Array.from({length:e.lenY},(l,A)=>{let x={content:y?e.transformTileAtCoordinates(new i.default(g,A),"","■","⸱","ⵔ","ᐳ","ⵙ","ᐷ","☠",m):(0,t.jsx)(n.default,{draggable:"false",loading:"eager",src:e.transformTileAtCoordinates(new i.default(g,A),d.default,a.default,s.default,o.default,u.default,h.default,c.default,f.default,m),alt:"Tile",height:80,width:80}),className:O,tileType:e.transformTileAtCoordinates(new i.default(g,A),T.LevelTileEnum.EMPTY,T.LevelTileEnum.WALL,T.LevelTileEnum.GOAL,T.LevelTileEnum.BOX,T.LevelTileEnum.PLAYER,T.LevelTileEnum.BOX_ON_GOAL,T.LevelTileEnum.PLAYER_ON_GOAL,T.LevelTileEnum.EMPTY,m)};return(0,t.jsx)(r.TileButtonMemo,{...x},"Tile, x:"+g+", y:"+A)})},"Tile row:"+g))})}e.s(["default",()=>m])},41941,e=>{"use strict";var t=e.i(91398);function i({text:e,onClick:i}){return(0,t.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:i,children:e})}e.s(["default",()=>i])},11244,58638,53871,12636,39392,e=>{"use strict";var t=e.i(10649);function i(e,t,i){return[...Array(e)].map(()=>Array(t).fill(i))}function l(e,t,l){let n=i(e,t,l(0,0));for(let i=0;i<e;i++)for(let e=0;e<t;e++)n[i][e]=l(i,e);return n}function n(e){return l(e[0].length,e.length,(t,i)=>e[i][t])}function r(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){if(e[i].length!=t[i].length)return!1;for(let l=0;l<e[0].length;l++)if(e[i][l]!=t[i][l])return!1}return!0}function a(e,t,l=1){if(0==e.length)return i(2*l,2*l,t);let n=i(e.length+2*l,e[0].length+2*l,t);for(let t=0;t<e.length;t++)for(let i=0;i<e[0].length;i++)n[t+l][i+l]=e[t][i];return n}function s(e,t=1){return e.length-2*t<1||e[0].length-2*t<1?[]:l(e.length-2*t,e[0].length-2*t,(i,l)=>e[i+t][l+t])}function o(e){return[...e].reverse().join("")}function u(e,t){let i=[];for(let l=0;l<e.length;l+=t)i.push(e.substring(l,l+t));return i}function h(e){if(e.length<2)return[e];let t=[],i=0;for(let l=0;l<e.length+1;l++)(l==e.length||e.charAt(i)!=e.charAt(l))&&(t.push(e.substring(i,l)),i=l);return t}function c(e){return/^\d*[1-9]\d*$/.test(e)}function f(e,t,i){return e.substring(0,i)+t+e.substring(i+1)}e.s(["enlargeMatrixOnEachSide",()=>a,"getMatrixOfSize",()=>i,"getMatrixWithConditionalFill",()=>l,"getTransposedMatrix",()=>n,"matricesAreEqual",()=>r,"trimMatrixOnEachSide",()=>s],58638),e.s(["chunkString",()=>u,"getStringWithChangedCharAt",()=>f,"isStringAPositiveInteger",()=>c,"reverseString",()=>o,"splitStringToRepeatingGroups",()=>h],53871);let d="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ*.",g=d.length,T=d[0],m=d[g-1];function A(e){if(0==e)return"0";let t="";for(;e>0;)t+=d[e%g],e=Math.floor(e/g);return o(t)}function x(e){let t=0,i=1,l=o(e);for(let n=0;n<l.length;n++){let r=d.indexOf(l[n]);if(-1==r)throw Error("Input is not in base64: "+e+", at: "+e[n]+", "+n);t+=i*r,i*=g}return t}function v(e){let t="",i=u(e,6);for(let e=0;e<i.length;e++)t+=A(Number.parseInt(i[e],2));return t}function E(e){let t="",i="0".repeat(6);for(let l=0;l<e.length;l++)t+=(i+x(e[l]).toString(2)).slice(-i.length);return t}e.s(["BASE64_BITS",0,6,"BASE64_ONES_CHAR",0,T,"BASE64_ZEROS_CHAR",0,m,"base64StringToBinaryString",()=>E,"base64ToDecimal",()=>x,"binaryStringToBase64String",()=>v,"decimalToBase64",()=>A],12636);var y=e.i(33243);function b(e){let t=h(e),i="";for(let e=0;e<t.length;e++){let l=t[e],n=l.startsWith(m)?"(":l.startsWith(T)?")":"";if(l.length>2&&""!=n){let e=A(l.length);i+=n.repeat(e.length)+e}else i+=l}return i}function L(e){let t="";for(let i=0;i<e.length;){let l="("==e[i]?m:")"==e[i]?T:"";if(""==l)t+=e[i++];else{let n=i;for(;"("==e[i]||")"==e[i];)i++;let r=i-n;t+=l.repeat(x(e.substring(i,i+r))),i+=r}}return t}function p(e,t){return new y.default(Math.floor(e/t),e%t)}function P(e,t){return t*e.x+e.y}function O(e){return l(e.length,e[0].length,(t,i)=>!e[t][i])}function w(e){let t=[];for(let i=0;i<e.length;i++)for(let l=0;l<e[0].length;l++)e[i][l]&&t.push(new y.default(i,l));return t}function B(e,t){for(let i=0;i<e.length;i++)for(let l=0;l<e[0].length;l++)if(e[i][l]&&!t[i][l])return!1;return!0}function S(e,t=[]){let i="";for(let l=0;l<e.length;l++)for(let n=0;n<e[0].length;n++)(0==t.length||t[l][n])&&(i+=String(e[l][n]?"1":"0"));return i}function _(e,t,l,n=[]){let r=i(t,l,!1),a=0;for(let i=0;i<t;i++)for(let t=0;t<l;t++)(0==n.length||n[i][t])&&(r[i][t]=1==Number.parseInt(e[a]),a++);return r}function I(e){let t=a(e,!1),i=t.length,n=t[0].length,r=[new y.default(-1,-1),new y.default(0,-1),new y.default(1,-1),new y.default(-1,0),new y.default(1,0),new y.default(-1,1),new y.default(0,1),new y.default(1,1)];return l(i,n,(e,l)=>{if(t[e][l])return!1;let a=!1;for(let s of r){let r=e+s.x,o=l+s.y;if(!(r<0)&&!(o<0)&&!(r>=i)&&!(o>=n)&&t[r][o]){a=!0;break}}return a})}function M(e){let t=N(e),i=N(e.getLevelTransposed());return i.length<t.length?f(i,"_",i.indexOf("-")):t}function N(e){var i,l;let n,a;return A(e.lenX)+"-"+A(e.lenY)+"-"+((i=e).isInitialPlayerAtNoPlayerCoordinates()?"":A(P(i.initialPlayer,i.lenY)))+(n=R(l=e,t.LevelTileEnum.WALL),r(n,I(a=s(l.getPlayableAreaMask())))?"_"+k(a):"-"+k(n))+function(e){let i=R(e,t.LevelTileEnum.GOAL);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getPlayableAreaMask();if(B(i,t))return"_"+k(i,t)}return"-"+k(i,D(e))}(e)+function(e){let i=R(e,t.LevelTileEnum.BOX);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getViableBoxMask();if(B(i,t))return"_"+k(i,t)}return"-"+k(i,D(e))}(e)}function D(e){return O(R(e,t.LevelTileEnum.WALL))}function R(e,n){switch(n){case t.LevelTileEnum.WALL:case t.LevelTileEnum.GOAL:return l(e.lenX,e.lenY,(t,i)=>e.levelTiles[t][i]==n);case t.LevelTileEnum.BOX:{let t=i(e.lenX,e.lenY,!1);for(let i of e.initialBoxes)t[i.x][i.y]=!0;return t}default:throw Error("Bitmap encoding not supported for tile type: "+n)}}function k(e,t=[]){return b(v(function(e,t){if(0==e.length)return e;let i=e.at(-1);if(void 0===i)throw Error("Could not bit fill a binary string");return e+i.repeat((6-e.length%6)%6)}(S(e,t),6)))}e.s(["ALT_SEPARATOR",0,"_","SEPARATOR",0,"-","binaryStringToBitmap",()=>_,"bitmapToBinaryString",()=>S,"bitmapToCoordinates",()=>w,"canMaskBeUsedOnBitmap",()=>B,"compressBase64String",()=>b,"coordinatesToTileId",()=>P,"decompressBase64String",()=>L,"getInvertedBitmap",()=>O,"tileIdToCoordinates",()=>p,"trimmedPlayableMaskToWallBitmap",()=>I],39392),e.s(["default",()=>M],11244)},3828,(e,t,i)=>{t.exports=e.r(26990)},48796,35125,72758,e=>{"use strict";e.s(["NO_PLAYER_COORDINATES",()=>a,"default",()=>s],35125);var t=e.i(10649),i=e.i(33243),l=e.i(58638),n=e.i(48342);class r{parentLevel;player;boxes;turn;constructor(e,t,i,l){this.parentLevel=e,this.player=t,this.boxes=i,this.turn=l}isPlayerAt(e){return this.player.equals(e)}getBoxIdxAt(e){let t=this.boxes.findIndex(t=>t.equals(e));return -1==t?null:t}isWon(){return this.boxes.length>0&&this.boxes.every(e=>this.parentLevel.isGoalAt(e))}isPlayerAtNoPlayerCoordinates(){return a.equals(this.player)}createNewLevelStateForPlayerMove(e){if(this.isWon())return null;let t=this.player.getShifted(e);if(!this.parentLevel.isValidPlaceForObjectAt(t))return null;let i=this.getBoxIdxAt(t);if(null!=i){let l=t.getShifted(e);if(!this.canBoxBePushedTo(l))return null;this.boxes[i]=l}return new r(this.parentLevel,t,this.boxes,this.turn+1)}createNewLevelStateForClick(e){if(this.isWon()||this.isPlayerAtNoPlayerCoordinates()||this.player.equals(e)||this.parentLevel.isWallAt(e))return null;let t=this.getBoxIdxAt(e);if(null!=t){let i=this.player.getDirectionOfAdjacentObject(e);if(null==i)return null;{let l=e.getShifted(i);return this.canBoxBePushedTo(l)?(this.boxes[t]=l,new r(this.parentLevel,e,this.boxes,this.turn+1)):null}}let i=function(e,t,i,r,a){let s=(0,l.getMatrixOfSize)(e,t,!1),o=[i],u=[];s[i.x][i.y]=!0;let h=0;for(;o.length>0;){for(;o.length>0;){let e=o.pop();if(void 0===e)throw Error("Nothing to pop");if(r.equals(e))return h;for(let t of[n.DirectionEnum.UP,n.DirectionEnum.LEFT,n.DirectionEnum.DOWN,n.DirectionEnum.RIGHT]){let i=e.getShifted(t);a(i)||s[i.x][i.y]||(s[i.x][i.y]=!0,u.push(i))}}o=u,u=[],h++}return null}(this.parentLevel.lenX,this.parentLevel.lenY,this.player,e,e=>!this.parentLevel.isValidPlaceForObjectAt(e)||null!=this.getBoxIdxAt(e));return null==i?null:new r(this.parentLevel,e,this.boxes,this.turn+i)}canBoxBePushedTo(e){return this.parentLevel.isValidPlaceForObjectAt(e)&&null==this.getBoxIdxAt(e)}}let a=new i.default(-1,-1);class s{lenX;lenY;levelTiles;initialBoxes;initialPlayer;constructor(e,t,i,l,n){this.lenX=e,this.lenY=t,this.levelTiles=i,this.initialPlayer=n,this.initialBoxes=l}getInitialLevelState(){return new r(this,this.initialPlayer,this.initialBoxes.slice(),0)}getTileAt(e){return this.levelTiles[e.x][e.y]}isInitialPlayerAt(e){return this.initialPlayer.equals(e)}isWallAt(e){return this.getTileAt(e)==t.LevelTileEnum.WALL}isGoalAt(e){return this.getTileAt(e)==t.LevelTileEnum.GOAL}isEmptyTileAt(e){return this.getTileAt(e)==t.LevelTileEnum.EMPTY}isInitiallyEmptyAt(e){return this.isEmptyTileAt(e)&&!this.isInitialPlayerAt(e)&&null==this.getInitialBoxIdxAt(e)}getInitialBoxIdxAt(e){let t=this.initialBoxes.findIndex(t=>t.equals(e));return -1==t?null:t}isValidPlaceForObjectAt(e){return e.x>=0&&e.y>=0&&e.x<this.lenX&&e.y<this.lenY&&!this.isWallAt(e)}isInitialPlayerAtNoPlayerCoordinates(){return a.equals(this.initialPlayer)}isCornerAt(e){if(!this.isValidPlaceForObjectAt(e))return!1;let t=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.UP)),i=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.LEFT)),l=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.DOWN)),r=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.RIGHT));return t&&i||i&&l||l&&r||r&&t}canBoxBePushedInDirectionAt(e,t){let i=e.getShifted((0,n.getOppositeDirection)(t)),l=e.getShifted(t);return this.isValidPlaceForObjectAt(l)&&this.isValidPlaceForObjectAt(i)}getLevelCopy(){return new s(this.lenX,this.lenY,this.levelTiles,this.initialBoxes,this.initialPlayer)}changeTileTo(e,t){this.levelTiles[e.x][e.y]=t}removeInitialBoxAt(e){this.initialBoxes=this.initialBoxes.filter(t=>!t.equals(e))}addInitialBoxAt(e){this.initialBoxes.push(e)}moveInitialPlayerTo(e){this.initialPlayer=e}changeLevelBasedOnBrushClick(e,i){let l=this.isInitiallyEmptyAt(e),n=this.isEmptyTileAt(e),r=this.isWallAt(e),s=this.isGoalAt(e),o=null!=this.getInitialBoxIdxAt(e),u=this.isInitialPlayerAt(e);switch(i){case t.LevelTileEnum.EMPTY:if(l)return;(r||s)&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),o&&this.removeInitialBoxAt(e),u&&this.moveInitialPlayerTo(a);break;case t.LevelTileEnum.WALL:if(r)return;(n||s)&&this.changeTileTo(e,t.LevelTileEnum.WALL),o&&this.removeInitialBoxAt(e),u&&this.moveInitialPlayerTo(a);break;case t.LevelTileEnum.GOAL:if(s)return;(n||r)&&this.changeTileTo(e,t.LevelTileEnum.GOAL);break;case t.LevelTileEnum.BOX:if(o)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),u&&this.moveInitialPlayerTo(a),this.addInitialBoxAt(e);break;case t.LevelTileEnum.PLAYER:if(u)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),o&&this.removeInitialBoxAt(e),this.moveInitialPlayerTo(e);break;default:throw Error("Tile change not supported for enum: "+i)}}changeLevelDimensions(e,i){let n=(0,l.getMatrixOfSize)(e,i,t.LevelTileEnum.EMPTY);for(let t=0;t<Math.min(e,this.lenX);t++)for(let e=0;e<Math.min(i,this.lenY);e++)n[t][e]=this.levelTiles[t][e];this.levelTiles=n,this.initialBoxes=this.initialBoxes.filter(t=>t.x<e&&t.y<i),(this.initialPlayer.x>=e||this.initialPlayer.y>=i)&&this.moveInitialPlayerTo(a),this.lenX=e,this.lenY=i}getLevelTransposed(){return new s(this.lenY,this.lenX,(0,l.getTransposedMatrix)(this.levelTiles),this.initialBoxes.map(e=>new i.default(e.y,e.x)),new i.default(this.initialPlayer.y,this.initialPlayer.x))}getPlayableAreaMask(){return this.isInitialPlayerAtNoPlayerCoordinates()?(0,l.getMatrixOfSize)(this.lenX,this.lenY,!0):function(e,t,i,r){let a=(0,l.getMatrixOfSize)(e,t,!1),s=[i];for(a[i.x][i.y]=!0;s.length>0;){let e=s.pop();if(void 0===e)throw Error("Nothing to pop");for(let t of[n.DirectionEnum.UP,n.DirectionEnum.LEFT,n.DirectionEnum.DOWN,n.DirectionEnum.RIGHT]){let i=e.getShifted(t);r(i)||a[i.x][i.y]||(a[i.x][i.y]=!0,s.push(i))}}return a}(this.lenX,this.lenY,this.initialPlayer,e=>!this.isValidPlaceForObjectAt(e))}getAllCornersInMask(e){let t=[];for(let l=0;l<this.lenX;l++)for(let n=0;n<this.lenY;n++){if(!e[l][n])continue;let r=new i.default(l,n);this.isCornerAt(r)&&t.push(r)}return t}getViableBoxMask(){let e=this.getPlayableAreaMask();for(let t of this.getAllCornersInMask(e))for(let i of(e[t.x][t.y]=!1,[n.DirectionEnum.RIGHT,n.DirectionEnum.DOWN]))if(this.isValidPlaceForObjectAt(t.getShifted(i))){let l=[],r=t;for(;!this.isGoalAt(r);){if(l.length>0&&this.isCornerAt(r)){for(let t of l)e[t.x][t.y]=!1;break}let t=r.getShifted(i);if(this.canBoxBePushedInDirectionAt(t,(0,n.getRotatedDirection)(i)))break;l.push(r),r=t}}return e}transformTileAtCoordinates(e,t,i,l,n,r,a,s,o,u){let h=this.isEmptyTileAt(e),c=this.isWallAt(e),f=this.isGoalAt(e),d=u?null!=u.getBoxIdxAt(e):null!=this.getInitialBoxIdxAt(e),g=u?u.isPlayerAt(e):this.isInitialPlayerAt(e);if(c&&g||c&&d||d&&g)return o;if(c)return i;if(f&&d)return a;if(f&&g)return s;if(f)return l;else if(d)return n;else if(g)return r;else if(h)return t;else return o}}var o=e.i(12636),u=e.i(39392);let h="Invalid code";function c(e){let t=e.replaceAll(u.ALT_SEPARATOR,u.SEPARATOR).split(u.SEPARATOR);if(6!=t.length)throw Error(h);let n=e.split("").filter(e=>e==u.ALT_SEPARATOR||e==u.SEPARATOR).map(e=>e==u.ALT_SEPARATOR).reduce((e,t)=>[...e,t],[]);try{let e=(0,o.base64ToDecimal)(t[0]),r=(0,o.base64ToDecimal)(t[1]),a=0==t[2].length?new i.default(-1,-1):(0,u.tileIdToCoordinates)((0,o.base64ToDecimal)(t[2]),r),h=n[2]?(0,u.trimmedPlayableMaskToWallBitmap)(f(t[3],e-2,r-2)):f(t[3],e,r),c=new s(e,r,d(h,(0,l.getMatrixOfSize)(e,r,!1)),[],a),g=(0,u.getInvertedBitmap)(h),T=f(t[4],e,r,n[3]?c.getPlayableAreaMask():g);c.levelTiles=d(h,T);let m=f(t[5],e,r,n[4]?c.getViableBoxMask():g);if(c.initialBoxes=(0,u.bitmapToCoordinates)(m),n[0])return c.getLevelTransposed();return c}catch{throw Error(h)}}function f(e,t,i,l=[]){let n=(0,o.base64StringToBinaryString)((0,u.decompressBase64String)(e));return(0,u.binaryStringToBitmap)(n,t,i,l)}function d(e,i){return(0,l.getMatrixWithConditionalFill)(e.length,e[0].length,(l,n)=>e[l][n]?t.LevelTileEnum.WALL:i[l][n]?t.LevelTileEnum.GOAL:t.LevelTileEnum.EMPTY)}e.s(["default",()=>c],48796);let g=`    #####
    #   #
    #$  #
  ###  $##
  #  $ $ #
### # ## #   ######
#   # ## #####  ..#
# $  $          ..#
##### ### #@##  ..#
    #     #########
    #######
`;e.s(["DEFAULT_LEVEL_CODE_EDITOR",0,"8-7-v_7(4_0a0E0_2G","DEFAULT_LEVEL_CODE_GAME",0,"j-b-21_1wc7wA..BYEZ0U40M40we1Me1M_)8f._gkwo)3","DEFAULT_LEVEL_CODE_GAME_XSB",0,g],72758)},30338,e=>{"use strict";var t=e.i(91398),i=e.i(91788),l=e.i(48342),n=e.i(91426),r=e.i(41941),a=e.i(33243),s=e.i(59196),o=e.i(11244),u=e.i(41158);let h=(0,i.memo)(function({level:e}){return(0,t.jsx)(u.default,{className:"pl-2",href:{pathname:s.EDITOR_PAGE_PATH,query:{level:(0,o.default)(e)}},children:(0,t.jsx)(r.default,{text:"✎ Edit"})})});function c({level:e}){let[s,o]=(0,i.useState)(e.getInitialLevelState());function u(){o(e.getInitialLevelState())}return(0,i.useEffect)(()=>{function e(e){if(s.isPlayerAtNoPlayerCoordinates())return;let t=(0,l.getDirectionEnumFromKeyboardEventKey)(e.key);if(null!=t){let e=s.createNewLevelStateForPlayerMove(t);null!=e&&o(e)}else"r"==e.key&&u()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"flex-col",children:[(0,t.jsxs)("div",{className:"pb-2 h-12",children:[(0,t.jsx)("div",{className:"float-left pt-3",children:(0,t.jsx)("p",{className:s.isWon()?"font-bold text-xl":"",children:"Turn: "+s.turn})}),(0,t.jsxs)("div",{className:"float-right",children:[(0,t.jsx)(r.default,{text:"↻ Reset",onClick:u}),(0,t.jsx)(h,{level:e})]})]}),(0,t.jsx)(n.default,{level:e,levelState:s,tileOnClickHandler:function(e,t){if(s.isPlayerAtNoPlayerCoordinates())return;let i=s.createNewLevelStateForClick(new a.default(e,t));null!=i&&o(i)}})]})})}var f=e.i(11205),d=e.i(3828),g=e.i(48796),T=e.i(72758);function m(){let[e,l]=(0,i.useState)(null),n=(0,d.useRouter)();return(0,i.useEffect)(()=>{if(!n.isReady)return;let e=n.query.level;if(e?.constructor===String)try{l((0,g.default)(e));return}catch{}l((0,g.default)(T.DEFAULT_LEVEL_CODE_GAME))},[n.isReady,n.query.level]),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.default,{activatePage:f.PagesEnum.GAME}),(0,t.jsx)("div",{className:"mt-2",children:null!=e&&(0,t.jsx)(c,{level:e})})]})}e.s(["default",()=>m],30338)},84705,(e,t,i)=>{let l="/game";(window.__NEXT_P=window.__NEXT_P||[]).push([l,()=>e.r(30338)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([l])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/f4fe8aeb8343dcd3.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);