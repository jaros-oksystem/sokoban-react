(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29855,e=>{"use strict";var t=e.i(72758);let i="library",l=[{uuid:crypto.randomUUID(),collectionName:"Originals",author:"Thinking rabbit",description:"The original sokoban levels",levels:t.ORIGINAL_LEVELS_CSB_CODES.map((e,t)=>({uuid:crypto.randomUUID(),order:t+1,levelName:"Level "+(t+1),csbCode:e}))},{uuid:crypto.randomUUID(),collectionName:"Microban",author:"David W Skinner",description:"A collection of simple levels",levels:t.MICROBAN_CSB_CODES.map((e,t)=>({uuid:crypto.randomUUID(),order:t+1,levelName:"Level "+(t+1),csbCode:e}))}];function n(){let e=void 0===globalThis.window?null:localStorage.getItem(i);if(null==e)return r(l),l;try{return JSON.parse(e)}catch{return l}}function r(e){void 0!==globalThis.window&&localStorage.setItem(i,JSON.stringify(e))}function o(e){let t=[...n(),e].toSorted((e,t)=>e.collectionName.localeCompare(t.collectionName));return r(t),t}function a(e){let t=n(),i=f(e);return t.splice(i,1),r(t),t}function s(e,t){a(e),o(t)}function _(e,t){let i=n(),l=f(e),o=i[l].levels;for(let e=0;e<o.length;e++){let i=o[e];i.order>=t.order&&(i.order+=1)}return o.push(t),i[l].levels=o.toSorted((e,t)=>e.order-t.order),r(i),i[l]}function u(e,t){let i=n(),l=f(e),o=i[l].levels,a=o.findIndex(e=>e.uuid==t);if(-1==a)throw Error("Level record with uuid "+t+" was not found");let s=o[a];for(let e=0;e<o.length;e++){let t=o[e];e!=a&&t.order>s.order&&(t.order-=1)}return i[l].levels.splice(a,1),r(i),i[l]}function c(e,t,i){return u(e,t),_(e,i)}function f(e){let t=n().findIndex(t=>t.uuid==e);if(-1==t)throw Error("Collection with uuid "+e+" was not found");return t}function h(){let e=n().filter(e=>0!=e.levels.length);return 0==e.length?null:e[0]}function d(e){return n()[f(e)]}function g(e){let t=n().reduce((e,t)=>e.concat(t.levels),[]).find(t=>t.uuid===e);if(void 0===t)throw Error("Level not found for uuid "+e);return t}function v(e){let t=n().find(t=>t.levels.some(t=>t.uuid==e));if(void 0===t)throw Error("Collection with level uuid "+e+" was not found");return t}e.s(["addCollectionToLibrary",()=>o,"addLevelToLibrary",()=>_,"findCollectionByUuid",()=>d,"findCollectionWithLevel",()=>v,"findLevelRecordByUuid",()=>g,"getFirstNonEmptyCollectionOrNull",()=>h,"getLibraryFromLocalStorage",()=>n,"removeCollectionFromLibrary",()=>a,"removeLevelFromLibrary",()=>u,"updateCollectionInLibrary",()=>s,"updateLevelInLibrary",()=>c])},85983,e=>{e.v("/sokoban-react/_next/static/media/logo.536fba4b.svg")},45163,e=>{e.v("/sokoban-react/_next/static/media/empty_tile.bbfc06e6.svg")},31530,e=>{e.v("/sokoban-react/_next/static/media/wall.bd91bc79.svg")},97287,e=>{e.v("/sokoban-react/_next/static/media/goal.ffa462d1.svg")},95579,e=>{e.v("/sokoban-react/_next/static/media/box.77815d28.svg")},35910,e=>{e.v("/sokoban-react/_next/static/media/player.7e213bae.svg")},93965,e=>{e.v("/sokoban-react/_next/static/media/box_on_goal.b71cdb00.svg")},63584,e=>{e.v("/sokoban-react/_next/static/media/player_on_goal.a3786ba2.svg")},80239,e=>{e.v("/sokoban-react/_next/static/media/error.c0755453.svg")},91524,e=>{"use strict";let t="options",i={grid:!1,textGraphics:!1};function l(){let e=void 0===globalThis.window?null:localStorage.getItem(t);if(null==e)return n(i),i;try{let t=JSON.parse(e);return{grid:t.grid??!1,textGraphics:t.textGraphics??!1}}catch{return i}}function n(e){void 0!==globalThis.window&&localStorage.setItem(t,JSON.stringify(e))}e.s(["getOptionsFromLocalStorage",()=>l,"saveOptionsToLocalStorage",()=>n])},48342,e=>{"use strict";var t,i=((t={})[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t);function l(e){switch(e){case"w":case"ArrowUp":return 0;case"a":case"ArrowLeft":return 1;case"s":case"ArrowDown":return 2;case"d":case"ArrowRight":return 3;default:return null}}function n(e){switch(e){case 0:return 2;case 1:return 3;case 2:return 0;case 3:return 1}}function r(e){switch(e){case 0:return 1;case 1:return 2;case 2:return 3;case 3:return 0}}e.s(["DirectionEnum",()=>i,"getDirectionEnumFromKeyboardEventKey",()=>l,"getOppositeDirection",()=>n,"getRotatedDirection",()=>r])},3205,e=>{"use strict";var t=e.i(91398);let i=(0,e.i(91788).memo)(l,(e,t)=>e.tileType==t.tileType);function l({className:e,content:i,tileSize:l}){return(0,t.jsx)("button",{style:void 0===l?{}:{width:l,height:l,fontSize:l/1.5},className:e,children:i})}e.s(["TileButton",()=>l,"TileButtonMemo",0,i])},33243,e=>{"use strict";var t=e.i(48342);class i{x;y;constructor(e,t){this.x=e,this.y=t}equals(e){return this.x===e.x&&this.y===e.y}getShifted(e,l=1){switch(e){case t.DirectionEnum.UP:return new i(this.x,this.y-l);case t.DirectionEnum.DOWN:return new i(this.x,this.y+l);case t.DirectionEnum.LEFT:return new i(this.x-l,this.y);case t.DirectionEnum.RIGHT:return new i(this.x+l,this.y)}}getDirectionOfAdjacentObject(e){for(let i of[t.DirectionEnum.UP,t.DirectionEnum.DOWN,t.DirectionEnum.LEFT,t.DirectionEnum.RIGHT])if(e.equals(this.getShifted(i)))return i;return null}}e.s(["default",()=>i])},10649,e=>{"use strict";var t,i=((t={})[t.EMPTY=0]="EMPTY",t[t.WALL=1]="WALL",t[t.GOAL=2]="GOAL",t[t.BOX=3]="BOX",t[t.PLAYER=4]="PLAYER",t[t.BOX_ON_GOAL=5]="BOX_ON_GOAL",t[t.PLAYER_ON_GOAL=6]="PLAYER_ON_GOAL",t);function l(e){switch(e){case 0:return"Empty";case 1:return"Wall";case 2:return"Goal";case 3:return"Box";case 4:return"Player";case 5:return"Box on goal";case 6:return"Player on goal"}}e.s(["LevelTileEnum",()=>i,"getTileTypeName",()=>l])},58638,e=>{"use strict";function t(e,t,i){return[...Array(e)].map(()=>Array(t).fill(i))}function i(e,i,l){let n=t(e,i,l(0,0));for(let t=0;t<e;t++)for(let e=0;e<i;e++)n[t][e]=l(t,e);return n}function l(e){return i(e[0].length,e.length,(t,i)=>e[i][t])}function n(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){if(e[i].length!=t[i].length)return!1;for(let l=0;l<e[0].length;l++)if(e[i][l]!=t[i][l])return!1}return!0}function r(e,i,l=1){if(0==e.length)return t(2*l,2*l,i);let n=t(e.length+2*l,e[0].length+2*l,i);for(let t=0;t<e.length;t++)for(let i=0;i<e[0].length;i++)n[t+l][i+l]=e[t][i];return n}function o(e,t=1){return e.length-2*t<1||e[0].length-2*t<1?[]:i(e.length-2*t,e[0].length-2*t,(i,l)=>e[i+t][l+t])}e.s(["enlargeMatrixOnEachSide",()=>r,"getMatrixOfSize",()=>t,"getMatrixWithConditionalFill",()=>i,"getTransposedMatrix",()=>l,"matricesAreEqual",()=>n,"trimMatrixOnEachSide",()=>o])},73048,53871,67943,e=>{"use strict";function t(e){return[...e].reverse().join("")}function i(e,t){let i=[];for(let l=0;l<e.length;l+=t)i.push(e.substring(l,l+t));return i}function l(e){if(e.length<2)return[e];let t=[],i=0;for(let l=0;l<e.length+1;l++)(l==e.length||e.charAt(i)!=e.charAt(l))&&(t.push(e.substring(i,l)),i=l);return t}function n(e){return/^\d*[1-9]\d*$/.test(e)}function r(e,t,i){return e.substring(0,i)+t+e.substring(i+1)}e.s(["chunkString",()=>i,"getStringWithChangedCharAt",()=>r,"isStringAPositiveInteger",()=>n,"reverseString",()=>t,"splitStringToRepeatingGroups",()=>l],53871);let o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ*.",a=o.length,s=o[0],_=o[a-1];function u(e){if(0==e)return"0";let i="";for(;e>0;)i+=o[e%a],e=Math.floor(e/a);return t(i)}function c(e){let i=0,l=1,n=t(e);for(let t=0;t<n.length;t++){let r=o.indexOf(n[t]);if(-1==r)throw Error("Input is not in base64: "+e+", at: "+e[t]+", "+t);i+=l*r,l*=a}return i}function f(e){let t="",l=i(e,6);for(let e=0;e<l.length;e++)t+=u(Number.parseInt(l[e],2));return t}function h(e){let t="",i="0".repeat(6);for(let l=0;l<e.length;l++)t+=(i+c(e[l]).toString(2)).slice(-i.length);return t}e.s(["BASE64_BITS",0,6,"BASE64_ONES_CHAR",0,s,"BASE64_ZEROS_CHAR",0,_,"base64StringToBinaryString",()=>h,"base64ToDecimal",()=>c,"binaryStringToBase64String",()=>f,"decimalToBase64",()=>u],73048);var d=e.i(33243),g=e.i(58638);function v(e){let t=l(e),i="";for(let e=0;e<t.length;e++){let l=t[e],n=l.startsWith(_)?"(":l.startsWith(s)?")":"";if(l.length>2&&""!=n){let e=u(l.length);i+=n.repeat(e.length)+e}else i+=l}return i}function T(e){let t="";for(let i=0;i<e.length;){let l="("==e[i]?_:")"==e[i]?s:"";if(""==l)t+=e[i++];else{let n=i;for(;"("==e[i]||")"==e[i];)i++;let r=i-n;t+=l.repeat(c(e.substring(i,i+r))),i+=r}}return t}function w(e,t){return new d.default(Math.floor(e/t),e%t)}function m(e,t){return t*e.x+e.y}function x(e){return(0,g.getMatrixWithConditionalFill)(e.length,e[0].length,(t,i)=>!e[t][i])}function b(e){let t=[];for(let i=0;i<e.length;i++)for(let l=0;l<e[0].length;l++)e[i][l]&&t.push(new d.default(i,l));return t}function E(e,t){for(let i=0;i<e.length;i++)for(let l=0;l<e[0].length;l++)if(e[i][l]&&!t[i][l])return!1;return!0}function A(e,t=[]){let i="";for(let l=0;l<e.length;l++)for(let n=0;n<e[0].length;n++)(0==t.length||t[l][n])&&(i+=String(e[l][n]?"1":"0"));return i}function L(e,t,i,l=[]){let n=(0,g.getMatrixOfSize)(t,i,!1),r=0;for(let o=0;o<t;o++)for(let t=0;t<i;t++)(0==l.length||l[o][t])&&(n[o][t]=1==Number.parseInt(e[r]),r++);return n}function y(e){let t=(0,g.enlargeMatrixOnEachSide)(e,!1),i=t.length,l=t[0].length,n=[new d.default(-1,-1),new d.default(0,-1),new d.default(1,-1),new d.default(-1,0),new d.default(1,0),new d.default(-1,1),new d.default(0,1),new d.default(1,1)];return(0,g.getMatrixWithConditionalFill)(i,l,(e,r)=>{if(t[e][r])return!1;let o=!1;for(let a of n){let n=e+a.x,s=r+a.y;if(!(n<0)&&!(s<0)&&!(n>=i)&&!(s>=l)&&t[n][s]){o=!0;break}}return o})}e.s(["ALT_SEPARATOR",0,"_","SEPARATOR",0,"-","binaryStringToBitmap",()=>L,"bitmapToBinaryString",()=>A,"bitmapToCoordinates",()=>b,"canMaskBeUsedOnBitmap",()=>E,"compressBase64String",()=>v,"coordinatesToTileId",()=>m,"decompressBase64String",()=>T,"getInvertedBitmap",()=>x,"tileIdToCoordinates",()=>w,"trimmedPlayableMaskToWallBitmap",()=>y],67943)},11791,e=>{"use strict";var t=e.i(10649),i=e.i(58638),l=e.i(73048),n=e.i(67943),r=e.i(53871);function o(e){let t=a(e),i=a(e.getLevelTransposed());return i.length<t.length?(0,r.getStringWithChangedCharAt)(i,n.ALT_SEPARATOR,i.indexOf(n.SEPARATOR)):t}function a(e){var r,o;let a,c;return(0,l.decimalToBase64)(e.lenX)+n.SEPARATOR+(0,l.decimalToBase64)(e.lenY)+(r=e,n.SEPARATOR+(r.isInitialPlayerAtNoPlayerCoordinates()?"":(0,l.decimalToBase64)((0,n.coordinatesToTileId)(r.initialPlayer,r.lenY))))+(a=_(o=e,t.LevelTileEnum.WALL),c=(0,i.trimMatrixOnEachSide)(o.getPlayableAreaMask()),(0,i.matricesAreEqual)(a,(0,n.trimmedPlayableMaskToWallBitmap)(c))?n.ALT_SEPARATOR+u(c):n.SEPARATOR+u(a))+function(e){let i=_(e,t.LevelTileEnum.GOAL);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getPlayableAreaMask();if((0,n.canMaskBeUsedOnBitmap)(i,t))return n.ALT_SEPARATOR+u(i,t)}return n.SEPARATOR+u(i,s(e))}(e)+function(e){let i=_(e,t.LevelTileEnum.BOX);if(!e.isInitialPlayerAtNoPlayerCoordinates()){let t=e.getViableBoxMask();if((0,n.canMaskBeUsedOnBitmap)(i,t))return n.ALT_SEPARATOR+u(i,t)}return n.SEPARATOR+u(i,s(e))}(e)}function s(e){return(0,n.getInvertedBitmap)(_(e,t.LevelTileEnum.WALL))}function _(e,l){switch(l){case t.LevelTileEnum.WALL:case t.LevelTileEnum.GOAL:return(0,i.getMatrixWithConditionalFill)(e.lenX,e.lenY,(t,i)=>e.levelTiles[t][i]==l);case t.LevelTileEnum.BOX:{let t=(0,i.getMatrixOfSize)(e.lenX,e.lenY,!1);for(let i of e.initialBoxes)t[i.x][i.y]=!0;return t}default:throw Error("Bitmap encoding not supported for tile type: "+l)}}function u(e,t=[]){let i=function(e,t){if(0==e.length)return e;let i=e.at(-1);if(void 0===i)throw Error("Could not bit fill a binary string");return e+i.repeat((t-e.length%t)%t)}((0,n.bitmapToBinaryString)(e,t),l.BASE64_BITS);return(0,n.compressBase64String)((0,l.binaryStringToBase64String)(i))}e.s(["default",()=>o])},38676,99930,e=>{"use strict";var t,i=e.i(91398),l=((t={})[t.RED=0]="RED",t[t.GREEN=1]="GREEN",t[t.BLUE=2]="BLUE",t[t.CYAN=3]="CYAN",t);function n({content:e="Button",onClick:t,color:n=l.BLUE,paddedText:r=!0}){let o=function(e){switch(e){case l.BLUE:return"bg-blue-500 hover:bg-blue-700 ";case l.GREEN:return"bg-green-500 hover:bg-green-700 ";case l.RED:return"bg-red-500 hover:bg-red-700 ";case l.CYAN:return"bg-cyan-500 hover:bg-cyan-700 "}}(n)+(r?"py-2 px-4 ":"")+"text-white font-bold rounded ";return(0,i.jsx)("button",{className:o,onClick:t,children:e})}e.s(["ColorEnum",()=>l],99930),e.s(["default",()=>n],38676)},72758,e=>{"use strict";let t=["j-b-21_1wc7wA..BYEZ0U40M40we1Me1M_)8f._gkwo)3","e-a-1a_*fzX*Nf.QJLfPTZT_.Y)a_)3y53Mf","h-a-2d_1gs71Ms70wbK.HXS.Eo6_.*)8_)3.0GA0","j-e-2n_fLf.fLfL24fLfLfLfLfy80*0*0*0*0*0*0_)ff(3_EfciUcz4w)4","h-d-2Z_3w70e0s0U1M1023.Bve.BZfWVtM0_..)a_)338OxF2","c-b-1A_*7MY7L9V*8j..X._.Y)8_001gylQ","c_d-v_0sI(3NO2ue.ZUXNS00_)6M73xM_owgNk0c0","g_g-1x_c03.YTvfXPm6.D.nv.Yc0fM3Y0.0fM3Y0_)fv(3_2aF52l1gxk)5","h-e-o_040c0c0c040.c.f.8.8.*v*4*c*c*c_)afCPU_hExR18g0080","j-g-x_tKfvx*ovM7TZ01.vvTTZZ.vv.TZZ.vk1D.v.Uf.._0030M)h1.0.T.._E60wyaGrMzNxhyA)5","f_j-J_030360vY1*g6DMbZ0vrwfvsj..Nwfw0t00*00_)cwr.._wBEm4gp)5","h-d-1v_.N0zZ5Wb*nQLVv2*vL.1U3X..Mfw_)d1Y3.._01kKFlg2)4","j-d-1i_fMnZT.VcmvYvU6jxD.wHf*qI.NGx.z.0_)f.F.w0_ly82yE0k1x)3","g_i-K_0v1ZY7s0h*t.Vkv.s8Hu*L*O.zEf*w8W0*U01w_)33Y1*fM)c_n00g)3EhsyI400","g_h-1r_7o0.05U3VUrX3vU8jXvnv*zvsUw7S0TM0e0_)81Y1Y7M)4_8gA2g9204O030","e-f-O_Y0uUfZXRYjUes783.3TxWM6o1Y_)9Ue3f._hais4E1k00","e_g-2y_7K1.wuM0dz.YSr4MLwK.L.Xx80u0_Mo6)c_)54iAw","d_j-P_1ZM2.w4Q3sve.T.P94KWbTQZr9..P01._841xw700o)9_)3g4w3yQ800","j-g-1x_e3j.S*dxXZY..TplSnhQD5.N0ov*01M0Y0f02M0._)i(3_M1M9km0w0c)5","j-g-3y_v*40xuUnLZT*tXO4Y.LZ.N7JZPvs0w7.V.*5lx.U_)k80f(3_m0c20k5E21lg)4","f-f-10_PwvTcyC.P9hAK.Vz.P*p.w0Y0*0v0_)d.m._4A0c3a2yg00","g_j-1m_Y1xXvv.TXZL.01nvSC.Jv.WX*TMxLz.v..ge3.T._)91.0.0vU7I)a_a99l8g0w08180boygkww","j-e-N_f*f.f.10.*.*20(40gv*v*f*103.3.07_.*.w)i_)6lliw22Egyww0","g_j-4d-..Ug07E02n.Oe003L49whBNbeUK7v2jLwqmx01g88F07QOi3..0_.Y.*g)m_)31E188g0B10y4EDx0","g_j-22-Y00j..910AHUjg096.fy3YV1*ohwc25uZ05g0yEM3TXYo12f.x._0vUe3.)i_00100MEu0dY200b","f-c-2B_f3.fY0z.fY4ZXTJuAXPL0U_)7Yf7w0w0_9k4521022n","j-d-2d_c1UXTTJLru*NIVv*Jnrz.*3VZiGD.7K0_.7wY71M)e_00M08a0cj0xd05yw","h-f-n_6M3U180L0TYUutLe.DXTJ.M.Pb3S3.3.w_)eNZ.o._485koymcxE8)4","d_j-1n_U01U01nY2ZtZ.LUw2P.QD.H02v..ZTt._)8fYfY)6_wM2g82Bl4x0","j-e-1b_eef*e42Q2T7.7nTgUu.*gsM0.uTv.vT.06_)d7w*1I3U_Mw13x44i30Agw","g_i-*_c00Ps7vMvLpO.ZH..YzWS6cor.wfM1U0700s00_)eu3(3_6yhiE0t2lx)5","d-f-j_406Y7u3.1TwwwT(3N.w.w0M_7zMYs)8_x0g02bhwHg","f_c-22-..MpM1ZxwxwLyzAxAxwLY5wBMxVx.._)adxYu60_8ChMgQ04210","f_e-Q_vMlUuI*S*Ph.vXnVoPuiu*7U60_You7w)b_0401i9kE2l0","j-g-2y_UvfS.IZj.vPufQO.cBhZT.7S0tv.t0f.3RMZsfs0_)i17wu7xU_2At4B2E0043)6","g_j-2f-00*vfN8Y0A6Sq005MS3bXUJYMkeUq4sV0wgwz8vMU1040w20v.0_)hT(3_lg2wB0e5k3hw)4","j-f-2k_*0v0dY6KPvZXKYTu.epVLhWI.*bX5w703.1.w_..Nwo0M)f_)4S0EM4Mc6k21v","b-b-1p_o3.qX*ni*Wn*0M_)3UNM)3_8Ag1w28","j-g-2P_ffD.VZuvnx50h.vvTYZZ*v7C10vg5kfRz.U.gfQ0_)iZ7*fTU_0CPyE8wDrgkw)6","g_h-12_3.Mq.3moiW7TgXW3*gSu7DgfKZw5U0.w7Y0_)d3PTzM_6I2a2508r)4","j-f-47_0*0p07w2g180A0i1F1QxWh.V*I.gvvDLU7Y3c_uhlh220o)8_)38wE4A7ka.","d_i-Q_1*0Y.Oi*fXX.JX*.L.vyfz.*f.U1M0_)47U1*0.0fM)7_2wR06)3iwd4yiiiv","j-b-1G_3M*5MEtO*vx4.Cmmv.Pqivrv3v_sXw)c_)358g4A0o0","f_j-12_s00E01.w3Ce4fY8booj.TQD.HEcvM0Kw1503._)bs7700_0b8gy1g)4","e_g-2l_UMefzPUuvzPWu*OyeL(3X.c3200_VMu3Me)b_0gi11h2A8xbv","g_e-1J_.MwmL..LfIcI5*7U5*4W62f*fUfU_)d1(3_l84C38Eg)4","i-b-17_fzcvWTnPSmOSvTe.2o3xYfxY_)b7(3_9n0hg45yE)4","g_d-2L_eUvM.x.3*1M3w23(3T.f*vYMo_(5Y)a_Jllllk00GGGGEE","f_g-2T_0o0701U0v0vUQ6ZvH.HRWc8wv81.0p._)5f0f0Y)4_78w08g4wl0","j-g-D_1M0s03.6.P.hXYZseR3tMVwd.3Icn..Y.TLT2M0U_00c0U7wu7)e_qgk21kgg1)310o0"],i=["6-7-h_.YNw_900_gf","7_6-f_*(3_04M0_r","9-6-E_tvZ7v_20w0_07","6_8-m_(33_0s00_s0","8-7-v_7(4_0a0E0_2G","6_c-y_Yv.u.U0_)3s0_Mg0","7-8-u_(5_0kak0_mB","c_8-e_ff4444YKWe_o)4_c00","6-7-9_NPP._w0._c0","8_b-K_0U50L.GDY_B)4_0G0","9-8-O_77*yK*e_44)3_030","9-8-A_MUXv757_0060_E0","7-9-k_UvTUoc_U)3_1a0","7-6-x_*.Hw_80w_3","9-7-H_oNy7Zv_0gw0_1w","a-8-Q_7.Tgvvf3_w1g)3_)3.","6-7-f_..U._gx0_ig","7-9-x_Yqd..0_g800_1w0","8_8-j_..2666_6)3_0M","9-8-q_MMT.Qks_)3E_8w","7-6-x_XTl._220_k","9_7-B_V.GTLo_5)4_0o","7-7-p_N.vY0_0g8_60","7-7-B_ev*Z._1080_4g","7-7-p_7.XD0_24g_4L","6-8-p_6S.._244_l0","7-7-C_.m.z0_20w_08w","7-7-g_V.UN._0wg_i0","b-9-X_3zhEQrJW.T0_)42w_E0","6-7-i_.ZXw_8h0_4L","7-7-g_cX.P._21g_I0","7-7-C_t.X60_h20_9f","7-7-C_.ZS.._G)3_0e0","6_9-s_cv(3_01U0_1U","6-a-L_vL..0._*)3_0V4","5_f-G_M0v(4_003U0_GE00","9-8-J_ssscf5._001M_iw0","a-7-w_ZaTHRH._12040_5w","a-9-O_XRvV1UY630_)32w_0c0","7-6-m_f.Y._14g_ig","8-6-8_XZ.O_00y._I0","7-8-y_757.*_003._3w","9-9-10_73xUYhY*0_)33._2M0","5-3-4_._f_w","6-7-q_.L*._x40_0f","7-8-B_sTJLY_020f_c0","b-7-i_uLuLqScv_00g80_y00","8-8-p_**A.f7_0s)3_2k","a_8-a_YQYU8rvv_)3s0_Q0","a-7-I_oP.mJi._)3k0_o00","8-7-C_VNXOD_01w0_50","6-8-x_uu.._0330_3M","7-7-q_t.vT0_60M0_kb","c-8-l_67ff74S**U_)33M0_Bw0","a-8-h-Y9qmAd*1wvIa3w_)3v_2w0","7-6-y_P.t._210_o","8-9-t_31LToe7_0050_0A","7-7-p_VZWT0_j00_j0","9_d-A_.Z0q.Z*.1Cf0v_)61M_0130","a-a-m_e.*3IH*TAfU_)6f_2kg0","a_9-x_.gHQi..720_07)3v_4d0","6_d-B_7D..Yv00_01U00_s80","j-6-1z_Pft4hfYy8zc._)3k00_0880","9_a-V_ufzUc1sv60_0068g_b10","9-9-Y_33Z*XT.1._A44)3_43w0","e_9-d_427SKXtKWTNMUs_2)5k0_w50","7-8-b_UK.t7_04c0_B0","a-7-q_f.bScoM_1M00_0b0","b-8-d_..5tv8..7_00x8)3_002n","8-a-l_XfXKpTtM_033)3_o17","9_d-t_*VZ*hd.rKM1.._009)6_E00","b_a-r_c7ZT4dPYXe30_)4320_gwg","8-a-T_X.JGoTZz_412)3_4840","b-8-y_6*Ttfooss_)4f_xk00","7_a-C-vP1E.w7wjx3._u)4_0an","a-b-f_v7YN.X0h*fNw_)3e)3_)3F","7_b-d_.T2nX.s0_7w)3_0iE0","8_b-V_v7Y.y8vVY_)4*0_lk00","a-6-D_f.HP.._0c800_4M","a-b-P_U7MiXnfV7v3U_08)31M_ggM0","6-9-w_6v..f_03w0_0T","8-8-l_T.Ntvc_0U)3_gE","a_8-X_Y*vnivvo_)32B0_H)3","a_c-Q_.34dUnxu4gvZN._e)6_0ig00","b-b-E_1z.oHvqHvr70U0_)31M)3_0w1020","9-8-k_7fru*Qs_1C)3_4Ew","9-a-M_r7VLrSfzU0_011107_c0M0","b-c-x-0fvF09vVg3M1DVw3.*001*_)5G_5g)3","a-9-U_Moc3Z7.LY0_0f)4_w81g","7_a-e_vDUA(3_001wo_Ai0","b-5-m_.*Pv._01U0_k2w","f-a-1R_30PI*1Mk710g47Znv0_)4e00_1o00","b-b-Y_tTLZ..77.Z.LtM_)4sks)4_0ia0EA0","9-8-h_S*SkS.T_01900_N00","8-8-9_(6_0icci0_qpo","b-b-Y_60MS6j..j3gu30_002w020_4180","e-a-e_f2YJW.Zwo410g410_)5v_9k10","g-a-28_XfP*ry0w86V.0Ms73MU_)5v)3_lgw00","a_m-1r_007001jUrY*6*d.AfMj.07.M1w0_)6Y)5_)4qw0","8-8-h_..g..7_u)4_2wb","d-d-1l_0U1jLBOe*5kfK9Q*Vg3w0_0208210400_84w210","8_b-A_Z*.*vP1Uf_Y)6_061v","8-8-P_eb..Qs_41w8_3c0","9_9-y_3.*Fs*630_)3e0_4M0","b_b-Y_oTn.VYvNY..noM_00r)36M00_1544kg0","a-9-k_6vdCPp.Wx._14h200_44q0","8-8-S_(6_0eiiu0_*pU","f-8-s_*.lv66626*S*s_ak)6_)3a5","9-d-T_3073.5fefQ9.._)6*_gia00","9-9-Q_63fDs*oc0_0E50_wA7","c_9-13_Yv.UcSufDNE._0e7)5_006mv","a-d-M_s1E.Z.XS3d.ve60_)448y0w_8a8g00","e-d-17_f0u1E7obUtM107wfUfMe0o_021k)5_0083w","b-9-M_XvWvtYS31wM_)3ghl0_3314","c-8-B_ovnrXLWuoo_00x44w0_5190","7_a-w_1N..*wU_7M)3_0*0","b-a-1i_7LHWlRZuXLhY_gEE)5_011y3","a-a-B_oef.UTE.7MM_)4f00_q400","a_9-D_f4THRWb.v0_)470_q0","b-b-B_tX.kycn2UO7Me0_)31C00_Nw00","b-b-Q_cT.*t2Uo31Ub1._0gu)4_A42v","b-c-G_.q.LmupVw60o1M7_)6lL_Ug800","f-b-15_M60M60..T7w4ex*eNYc0_)5F2w0_Jg)5","9_e-v_.v.vi9nZntg1v._)3I)6_I)3","d-8-1j_777626S*Tt7_d8)4_01gM","7_c-x_v..*GHXw0_.w)4_0fU0","a-9-o_7LRTjI*rc0_)31U0_383","b-8-B_orX.WmQYM_808420_xM0","b-8-x_orX.WmYUU_8084h0_xN0","c-7-w_VPXQevTL._)31l0_Fw00","b_7-n_VPy..uNw_2I)3_0ao","a-8-h_U.lvccee_r)4_894","8_a-H_v7Yx..Ys_aG)4_00BD","c-a-L_o61.8PV*nAb*Vw_0060c)3_g01w20","b-7-B_ZHR*DaZ._)4Cv_G400","9-8-P_fZJLG*e_Eh)3_20n","d-a-1b_e3Yh7hY9v*zUs70_01l)5_)3lg","b_c-O_c3MbM.2HK.3Y6wu_0ae)5_006b0","c_g-1l_o0fM3Y0W0eM0fz3fMvYus7w0_1NM)7_004k1E","e-9-D_.oTLT.A677Dzxw_f)8_)3qw","a-9-H_3x*.R9T.Z._)34f20_gwdw","9-9-E_63fDY*oc0_0hh00_51g","f_9-1D_MvdCzM8427OH.Te0_084)3u0_x09h0","c-c-14_1xTD*ZXZ2.uZ.DK60_01gb5Czga00_u60pw67w","b-b-U_70UfD.Z..fwU70_0ye1wsh0_3Aii9M","9-9-E_vv(5v0_8yagiy8w_3Ai94U0","a_c-w_0v.svuZY6Mb0U0_4h)5_004A0","f-7-I_VrvuH.LoNz7_0My)4_01l","a-c-e_g3t..q9Lww2080_)4g._wj00","8_f-16_1wfM4X.T..61w_03e)4_20n)3","c-a-13_7z8.X.U21wo71._)53._2I)3","9_f-1I-.u448IIAgiyVd0BHOI01(3_04)6g2w_84)3E","d-a-F_.Mf..Q3..Mb..*0_.Y)9_021k0l0l0","h_t-6S_v(3W)31n(3Gw005l..*GE00llv.WGG01lln.WGGw0lln.*GG005lv..GE001Z(4_)v1)5_00w","u-h-5i-vM*A.5f8G0kuUxR7WW0l7WG1hmH*B0BaFaknSLIBggaAARLL91jiiyLJ5gqqASBLB90aiuTLBCi8c0jYAYL.f-0c)5g4)380060o)po-0c)5g)480060o)ag)eo"],l=t[0],n=i[0],r=`    #####
    #   #
    #$  #
  ###  $##
  #  $ $ #
### # ## #   ######
#   # ## #####  ..#
# $  $          ..#
##### ### #@##  ..#
    #     #########
    #######
`;e.s(["DEFAULT_CSB_CODE_FOR_EDITOR",0,n,"DEFAULT_CSB_FOR_GAME",0,l,"DEFAULT_XSB_CODE",0,r,"ERROR_CSB_CODE",0,"1-1-0-._._","MICROBAN_CSB_CODES",0,i,"ORIGINAL_LEVELS_CSB_CODES",0,t])},35125,e=>{"use strict";e.s(["NO_PLAYER_COORDINATES",()=>d,"default",()=>g],35125);var t=e.i(10649),i=e.i(33243),l=e.i(58638),n=e.i(48342);class r{parentLevel;player;boxes;turn;constructor(e,t,i,l){this.parentLevel=e,this.player=t,this.boxes=i,this.turn=l}isPlayerAt(e){return this.player.equals(e)}getBoxIdxAt(e){let t=this.boxes.findIndex(t=>t.equals(e));return -1==t?null:t}isWon(){return this.boxes.length>0&&this.boxes.every(e=>this.parentLevel.isGoalAt(e))}isPlayerAtNoPlayerCoordinates(){return d.equals(this.player)}createNewLevelStateForPlayerMove(e){if(this.isWon())return null;let t=this.player.getShifted(e);if(!this.parentLevel.isValidPlaceForObjectAt(t))return null;let i=this.getBoxIdxAt(t);if(null!=i){let l=t.getShifted(e);if(!this.canBoxBePushedTo(l))return null;this.boxes[i]=l}return new r(this.parentLevel,t,this.boxes,this.turn+1)}createNewLevelStateForClick(e){if(this.isWon()||this.isPlayerAtNoPlayerCoordinates()||this.player.equals(e)||this.parentLevel.isWallAt(e))return null;let t=this.getBoxIdxAt(e);if(null!=t){let i=this.player.getDirectionOfAdjacentObject(e);if(null==i)return null;{let l=e.getShifted(i);return this.canBoxBePushedTo(l)?(this.boxes[t]=l,new r(this.parentLevel,e,this.boxes,this.turn+1)):null}}let i=function(e,t,i,r,o){let a=(0,l.getMatrixOfSize)(e,t,!1),s=[i],_=[];a[i.x][i.y]=!0;let u=0;for(;s.length>0;){for(;s.length>0;){let e=s.pop();if(void 0===e)throw Error("Nothing to pop");if(r.equals(e))return u;for(let t of[n.DirectionEnum.UP,n.DirectionEnum.LEFT,n.DirectionEnum.DOWN,n.DirectionEnum.RIGHT]){let i=e.getShifted(t);o(i)||a[i.x][i.y]||(a[i.x][i.y]=!0,_.push(i))}}s=_,_=[],u++}return null}(this.parentLevel.lenX,this.parentLevel.lenY,this.player,e,e=>!this.parentLevel.isValidPlaceForObjectAt(e)||null!=this.getBoxIdxAt(e));return null==i?null:new r(this.parentLevel,e,this.boxes,this.turn+i)}canBoxBePushedTo(e){return this.parentLevel.isValidPlaceForObjectAt(e)&&null==this.getBoxIdxAt(e)}}let o={src:e.i(45163).default,width:512,height:512,blurWidth:0,blurHeight:0},a={src:e.i(31530).default,width:512,height:512,blurWidth:0,blurHeight:0},s={src:e.i(97287).default,width:512,height:512,blurWidth:0,blurHeight:0},_={src:e.i(95579).default,width:512,height:512,blurWidth:0,blurHeight:0},u={src:e.i(35910).default,width:512,height:512,blurWidth:0,blurHeight:0},c={src:e.i(93965).default,width:512,height:512,blurWidth:0,blurHeight:0},f={src:e.i(63584).default,width:512,height:512,blurWidth:0,blurHeight:0},h={src:e.i(80239).default,width:36,height:36,blurWidth:0,blurHeight:0},d=new i.default(-1,-1);class g{lenX;lenY;levelTiles;initialBoxes;initialPlayer;constructor(e,t,i,l,n){this.lenX=e,this.lenY=t,this.levelTiles=i,this.initialPlayer=n,this.initialBoxes=l}getInitialLevelState(){return new r(this,this.initialPlayer,Array.from(this.initialBoxes),0)}getTileAt(e){return this.levelTiles[e.x][e.y]}isInitialPlayerAt(e){return this.initialPlayer.equals(e)}isWallAt(e){return this.getTileAt(e)==t.LevelTileEnum.WALL}isGoalAt(e){return this.getTileAt(e)==t.LevelTileEnum.GOAL}isEmptyTileAt(e){return this.getTileAt(e)==t.LevelTileEnum.EMPTY}isInitiallyEmptyAt(e){return this.isEmptyTileAt(e)&&!this.isInitialPlayerAt(e)&&null==this.getInitialBoxIdxAt(e)}getInitialBoxIdxAt(e){let t=this.initialBoxes.findIndex(t=>t.equals(e));return -1==t?null:t}isValidPlaceForObjectAt(e){return e.x>=0&&e.y>=0&&e.x<this.lenX&&e.y<this.lenY&&!this.isWallAt(e)}isInitialPlayerAtNoPlayerCoordinates(){return d.equals(this.initialPlayer)}isCornerAt(e){if(!this.isValidPlaceForObjectAt(e))return!1;let t=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.UP)),i=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.LEFT)),l=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.DOWN)),r=!this.isValidPlaceForObjectAt(e.getShifted(n.DirectionEnum.RIGHT));return t&&i||i&&l||l&&r||r&&t}canBoxBePushedInDirectionAt(e,t){let i=e.getShifted((0,n.getOppositeDirection)(t)),l=e.getShifted(t);return this.isValidPlaceForObjectAt(l)&&this.isValidPlaceForObjectAt(i)}getLevelCopy(){return new g(this.lenX,this.lenY,this.levelTiles,this.initialBoxes,this.initialPlayer)}changeTileTo(e,t){this.levelTiles[e.x][e.y]=t}removeInitialBoxAt(e){this.initialBoxes=this.initialBoxes.filter(t=>!t.equals(e))}addInitialBoxAt(e){this.initialBoxes.push(e)}moveInitialPlayerTo(e){this.initialPlayer=e}changeLevelBasedOnBrushClick(e,i){let l=this.isInitiallyEmptyAt(e),n=this.isEmptyTileAt(e),r=this.isWallAt(e),o=this.isGoalAt(e),a=null!=this.getInitialBoxIdxAt(e),s=this.isInitialPlayerAt(e);switch(i){case t.LevelTileEnum.EMPTY:if(l)return;(r||o)&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),a&&this.removeInitialBoxAt(e),s&&this.moveInitialPlayerTo(d);break;case t.LevelTileEnum.WALL:if(r)return;(n||o)&&this.changeTileTo(e,t.LevelTileEnum.WALL),a&&this.removeInitialBoxAt(e),s&&this.moveInitialPlayerTo(d);break;case t.LevelTileEnum.GOAL:if(o)return;(n||r)&&this.changeTileTo(e,t.LevelTileEnum.GOAL);break;case t.LevelTileEnum.BOX:if(a)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),s&&this.moveInitialPlayerTo(d),this.addInitialBoxAt(e);break;case t.LevelTileEnum.PLAYER:if(s)return;r&&this.changeTileTo(e,t.LevelTileEnum.EMPTY),a&&this.removeInitialBoxAt(e),this.moveInitialPlayerTo(e);break;default:throw Error("Tile change not supported for enum: "+i)}}changeLevelDimensions(e,i){let n=(0,l.getMatrixOfSize)(e,i,t.LevelTileEnum.EMPTY);for(let t=0;t<Math.min(e,this.lenX);t++)for(let e=0;e<Math.min(i,this.lenY);e++)n[t][e]=this.levelTiles[t][e];this.levelTiles=n,this.initialBoxes=this.initialBoxes.filter(t=>t.x<e&&t.y<i),(this.initialPlayer.x>=e||this.initialPlayer.y>=i)&&this.moveInitialPlayerTo(d),this.lenX=e,this.lenY=i}getLevelTransposed(){return new g(this.lenY,this.lenX,(0,l.getTransposedMatrix)(this.levelTiles),this.initialBoxes.map(e=>new i.default(e.y,e.x)),new i.default(this.initialPlayer.y,this.initialPlayer.x))}getPlayableAreaMask(){return this.isInitialPlayerAtNoPlayerCoordinates()?(0,l.getMatrixOfSize)(this.lenX,this.lenY,!0):function(e,t,i,r){let o=(0,l.getMatrixOfSize)(e,t,!1),a=[i];for(o[i.x][i.y]=!0;a.length>0;){let e=a.pop();if(void 0===e)throw Error("Nothing to pop");for(let t of[n.DirectionEnum.UP,n.DirectionEnum.LEFT,n.DirectionEnum.DOWN,n.DirectionEnum.RIGHT]){let i=e.getShifted(t);r(i)||o[i.x][i.y]||(o[i.x][i.y]=!0,a.push(i))}}return o}(this.lenX,this.lenY,this.initialPlayer,e=>!this.isValidPlaceForObjectAt(e))}getAllCornersInMask(e){let t=[];for(let l=0;l<this.lenX;l++)for(let n=0;n<this.lenY;n++){if(!e[l][n])continue;let r=new i.default(l,n);this.isCornerAt(r)&&t.push(r)}return t}getViableBoxMask(){let e=this.getPlayableAreaMask();for(let t of this.getAllCornersInMask(e))for(let i of(this.isGoalAt(t)||(e[t.x][t.y]=!1),[n.DirectionEnum.RIGHT,n.DirectionEnum.DOWN]))if(this.isValidPlaceForObjectAt(t.getShifted(i))){let l=[],r=t;for(;l.push(r),!this.isGoalAt(r);){if(l.length>1&&this.isCornerAt(r)){for(let t of l)e[t.x][t.y]=!1;break}let t=r.getShifted(i);if(this.canBoxBePushedInDirectionAt(t,(0,n.getRotatedDirection)(i)))break;r=t}}return e}transformTileAtCoordinates(e,t,i,l,n,r,o,a,s,_){let u=this.isEmptyTileAt(e),c=this.isWallAt(e),f=this.isGoalAt(e),h=_?null!=_.getBoxIdxAt(e):null!=this.getInitialBoxIdxAt(e),d=_?_.isPlayerAt(e):this.isInitialPlayerAt(e);if(c&&d||c&&h||h&&d)return s;if(c)return i;if(f&&h)return o;if(f&&d)return a;if(f)return l;else if(h)return n;else if(d)return r;else if(u)return t;else return s}getSvgForTile(e,t,l){return this.transformTileAtCoordinates(new i.default(e,t),o,a,s,_,u,c,f,h,l)}getCharForTile(e,t,l){return this.transformTileAtCoordinates(new i.default(e,t),"","■","⸱","ⵔ","ᐳ","ⵙ","ᐷ","☠",l)}getTileEnumForTile(e,l,n){return this.transformTileAtCoordinates(new i.default(e,l),t.LevelTileEnum.EMPTY,t.LevelTileEnum.WALL,t.LevelTileEnum.GOAL,t.LevelTileEnum.BOX,t.LevelTileEnum.PLAYER,t.LevelTileEnum.BOX_ON_GOAL,t.LevelTileEnum.PLAYER_ON_GOAL,t.LevelTileEnum.EMPTY,n)}}},27353,e=>{"use strict";var t=e.i(35125),i=e.i(73048),l=e.i(67943),n=e.i(58638),r=e.i(10649),o=e.i(33243);let a="Invalid code";function s(e){let r=e.replaceAll(l.ALT_SEPARATOR,l.SEPARATOR).split(l.SEPARATOR);if(6!=r.length)throw Error(a);let s=e.split("").filter(e=>e==l.ALT_SEPARATOR||e==l.SEPARATOR).map(e=>e==l.ALT_SEPARATOR).reduce((e,t)=>[...e,t],[]);try{let e=(0,i.base64ToDecimal)(r[0]),a=(0,i.base64ToDecimal)(r[1]),c=0==r[2].length?new o.default(-1,-1):(0,l.tileIdToCoordinates)((0,i.base64ToDecimal)(r[2]),a),f=s[2]?(0,l.trimmedPlayableMaskToWallBitmap)(_(r[3],e-2,a-2)):_(r[3],e,a),h=new t.default(e,a,u(f,(0,n.getMatrixOfSize)(e,a,!1)),[],c),d=(0,l.getInvertedBitmap)(f),g=_(r[4],e,a,s[3]?h.getPlayableAreaMask():d);h.levelTiles=u(f,g);let v=_(r[5],e,a,s[4]?h.getViableBoxMask():d);if(h.initialBoxes=(0,l.bitmapToCoordinates)(v),s[0])return h.getLevelTransposed();return h}catch{throw Error(a)}}function _(e,t,n,r=[]){let o=(0,i.base64StringToBinaryString)((0,l.decompressBase64String)(e));return(0,l.binaryStringToBitmap)(o,t,n,r)}function u(e,t){return(0,n.getMatrixWithConditionalFill)(e.length,e[0].length,(i,l)=>e[i][l]?r.LevelTileEnum.WALL:t[i][l]?r.LevelTileEnum.GOAL:r.LevelTileEnum.EMPTY)}e.s(["default",()=>s])},91426,e=>{"use strict";var t=e.i(91398),i=e.i(91788),l=e.i(26019),n=e.i(3205),r=e.i(91524);function o({level:e,levelState:o,tileOnClickHandler:a=()=>{},verticalSpaceTakenPx:s=200}){let _=(0,r.getOptionsFromLocalStorage)(),u=_.grid,c=_.textGraphics;function f(){return{width:void 0===globalThis.window?0:globalThis.window.innerWidth,height:void 0===globalThis.window?0:globalThis.window.innerHeight}}let[h,d]=(0,i.useState)(f());(0,i.useEffect)(()=>{globalThis.window.addEventListener("resize",()=>d(f()),!1)},[]);let g=Math.max(2,Math.min(80,Math.floor(Math.min((h.width-40)/e.lenX,(h.height-s)/e.lenY))));void 0!==globalThis.document&&(document.documentElement.style.setProperty("--tile-size",g+"px"),document.documentElement.style.setProperty("--tile-font-size",g/1.5+"px"));let v="tile "+(u?"border-[1px] border-black ":"");function T(t){let i=t.currentTarget.getBoundingClientRect();a(Math.min(e.lenX-1,Math.floor((t.clientX-1-i.left)/g)),Math.min(e.lenY-1,Math.floor((t.clientY-1-i.top)/g)))}return(0,t.jsx)("div",{className:"flex border-1",onMouseDown:T,onMouseOver:e=>1&e.buttons?T(e):{},children:Array.from({length:e.lenX},(i,r)=>(0,t.jsx)("div",{className:"whitespace-nowrap",children:Array.from({length:e.lenY},(i,a)=>{let s={content:c?e.getCharForTile(r,a,o):(0,t.jsx)(l.default,{draggable:"false",loading:"eager",src:e.getSvgForTile(r,a,o),alt:"Tile",height:80,width:80}),className:v,tileType:e.getTileEnumForTile(r,a,o)};return(0,t.jsx)(n.TileButtonMemo,{...s},"Tile, x:"+r+", y:"+a)})},"Tile row:"+r))})}e.s(["default",()=>o])},3828,(e,t,i)=>{t.exports=e.r(26990)},30338,e=>{"use strict";var t=e.i(91398),i=e.i(91788),l=e.i(48342),n=e.i(91426),r=e.i(33243),o=e.i(59196),a=e.i(11791),s=e.i(41158),_=e.i(38676),u=e.i(99930);let c=(0,i.memo)(function({level:e}){return(0,t.jsx)(s.default,{className:"pl-2",href:{pathname:o.EDITOR_PAGE_PATH,query:{level:(0,a.default)(e)}},children:(0,t.jsx)(_.default,{color:u.ColorEnum.CYAN,content:"✎ Open in editor"})})});var f=e.i(29855),h=e.i(27353);function d({onSelect:e,initialCollectionUuid:l,initialLevelUuid:n,isLevelWon:r}){let o=(0,f.getLibraryFromLocalStorage)().filter(e=>0!=e.levels.length),[a,s]=(0,i.useState)(l),[c,d]=(0,i.useState)(n);return void 0!==l&&void 0!==n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"flex items-center mx-2 font-bold",children:" Collection: "}),(0,t.jsx)("select",{onChange:t=>(function(t){let i=(0,f.findCollectionByUuid)(t).levels.at(0);if(void 0===i)throw Error("No level found found for collection "+t);s(t),d(i.uuid),e((0,h.default)(i.csbCode))})(t.target.value),value:a,onKeyDown:e=>g(e),children:o.map(e=>(0,t.jsx)("option",{value:e.uuid,children:e.collectionName},e.uuid))}),(0,t.jsx)("p",{className:"flex items-center mx-2 font-bold",children:" Level: "}),(0,t.jsx)("select",{onChange:t=>{var i;let l;return i=t.target.value,l=(0,f.findLevelRecordByUuid)(i),void(d(i),e((0,h.default)(l.csbCode)))},value:c,onKeyDown:e=>g(e),children:o.find(e=>e.uuid==a)?.levels.map(e=>(0,t.jsx)("option",{value:e.uuid,children:e.levelName},e.uuid))}),!function(){let e=(0,f.findCollectionByUuid)(a),t=e.levels.findIndex(e=>e.uuid==c);if(-1==t)throw Error("Level not found, levelUuid "+c+", collection uuid "+a);return t==e.levels.length-1}()&&r&&(0,t.jsx)("div",{className:"ml-2",children:(0,t.jsx)(_.default,{content:"⯈ Next level",onClick:function(){let t=(0,f.findCollectionByUuid)(a),i=t.levels.findIndex(e=>e.uuid==c)+1,l=t.levels[i];d(l.uuid),e((0,h.default)(l.csbCode))},color:u.ColorEnum.GREEN})})]})}function g(e){null!=(0,l.getDirectionEnumFromKeyboardEventKey)(e.key)&&e.preventDefault()}var v=e.i(72758);function T({urlLevel:e,libraryLevelUuid:o}){let a,s=null,u=null,g=!1;if(void 0!==e)a=e;else if(void 0!==o)s=o,u=(0,f.findCollectionWithLevel)(o).uuid,a=(0,h.default)((0,f.findLevelRecordByUuid)(o).csbCode);else{let e=(0,f.getFirstNonEmptyCollectionOrNull)();null!=e?(u=e.uuid,s=e.levels[0].uuid,a=(0,h.default)(e.levels[0].csbCode)):(a=(0,h.default)(v.DEFAULT_CSB_FOR_GAME),g=!0)}let[T,w]=(0,i.useState)(a),[m,x]=(0,i.useState)(a.getInitialLevelState());function b(){x(T.getInitialLevelState())}return(0,i.useEffect)(()=>{function e(e){if(m.isPlayerAtNoPlayerCoordinates())return;let t=(0,l.getDirectionEnumFromKeyboardEventKey)(e.key);if(null!=t){let e=m.createNewLevelStateForPlayerMove(t);null!=e&&x(e)}else"r"==e.key&&b()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col justify-center",children:(0,t.jsx)("div",{className:"flex border-black border-2 p-2 mb-2 h-15 mx-auto rounded-[10] bg-gray-100",children:null!=s&&null!=u?(0,t.jsx)(d,{initialCollectionUuid:u,initialLevelUuid:s,onSelect:function(e){w(e),x(e?.getInitialLevelState())},isLevelWon:m.isWon()}):(0,t.jsx)("span",{className:"flex items-center",children:g?"Loaded fallback level":"Level loaded from URL"})})}),(0,t.jsx)("div",{className:"flex flex-col justify-center",children:(0,t.jsxs)("div",{className:"flex border-black border-2 p-2 mb-2 mx-auto rounded-[10] bg-gray-100",children:[(0,t.jsx)("div",{className:"flex items-center ml-2 mr-4 "+(m.isWon()?"text-2xl ":""),children:(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Turn:"})," ",m.turn]})}),(0,t.jsxs)("div",{className:"flex flex-row ml-auto",children:[(0,t.jsx)(_.default,{content:"↻ Reset",onClick:b}),(0,t.jsx)(c,{level:T})]})]})}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(n.default,{level:T,levelState:m,tileOnClickHandler:function(e,t){if(m.isPlayerAtNoPlayerCoordinates())return;let i=m.createNewLevelStateForClick(new r.default(e,t));null!=i&&x(i)}})})]})}var w=e.i(11205),m=e.i(3828);function x(){let[e,l]=(0,i.useState)(void 0),[n,r]=(0,i.useState)(void 0),[o,a]=(0,i.useState)(!1),s=(0,m.useRouter)();return(0,i.useEffect)(()=>{if(!s.isReady)return;let e=s.query.level;if(e?.constructor===String)try{l((0,h.default)(e))}catch{}let t=s.query.levelUuid;if(t?.constructor===String)try{r(t)}catch{}a(!0)},[s.isReady,s.query.level,s.query.levelUuid]),(0,t.jsxs)("div",{children:[(0,t.jsx)(w.default,{activatePage:w.PagesEnum.GAME}),(0,t.jsx)("div",{className:"mt-2",children:o&&(0,t.jsx)(T,{libraryLevelUuid:n,urlLevel:e})})]})}e.s(["default",()=>x],30338)},84705,(e,t,i)=>{let l="/game";(window.__NEXT_P=window.__NEXT_P||[]).push([l,()=>e.r(30338)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([l])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/f4fe8aeb8343dcd3.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);